(function(t){function e(e){for(var s,n,l=e[0],o=e[1],c=e[2],m=0,u=[];m<l.length;m++)n=l[m],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&u.push(i[n][0]),i[n]=0;for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s]);d&&d(e);while(u.length)u.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],s=!0,l=1;l<a.length;l++){var o=a[l];0!==i[o]&&(s=!1)}s&&(r.splice(e--,1),t=n(n.s=a[0]))}return t}var s={},i={app:0},r=[];function n(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=s,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(a,s,function(e){return t[e]}.bind(null,s));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var d=o;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0e57":function(t,e,a){"use strict";var s=a("4215"),i=a.n(s);i.a},"1b00":function(t,e,a){"use strict";var s=a("24af"),i=a.n(s);i.a},"1f5a":function(t,e,a){},"24af":function(t,e,a){},"2b56":function(t,e,a){"use strict";var s=a("4548"),i=a.n(s);i.a},3324:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-footer",{attrs:{color:"primary lighten-1",padless:""}},[a("v-row",{attrs:{justify:"center","no-gutters":""}},t._l(t.links,(function(e){return a("v-btn",{key:e,staticClass:"my-2",attrs:{color:"white",text:"",rounded:""}},[t._v(" "+t._s(e)+" ")])})),1)],1)},i=[],r={data:()=>({links:[]})},n=r,l=a("2877"),o=a("6544"),c=a.n(o),d=a("8336"),m=a("553a"),u=a("0fd9"),p=Object(l["a"])(n,s,i,!1,null,null,null);e["default"]=p.exports;c()(p,{VBtn:d["a"],VFooter:m["a"],VRow:u["a"]})},4215:function(t,e,a){},4548:function(t,e,a){},4845:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",{staticClass:"overflow-hidden mb-10"},[a("v-app-bar",{attrs:{color:"blue-grey accent-4","elevate-on-scroll":"",dense:"",dark:"",fixed:""}},[a("div",{staticClass:"text-center"},[a("v-menu",{attrs:{"offset-y":"",transition:"expand-transition","close-on-click":"","close-on-content-click":""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({attrs:{dense:"",small:"",text:""}},Object.assign({},s)),[a("v-icon",{staticClass:"hidden-sm-and-down"},[t._v("mdi-dots-vertical")]),a("v-icon",{staticClass:"hidden-md-and-up",attrs:{small:""}},[t._v("mdi-dots-vertical")]),a("h3",[t._v("VBC")])],1)]}}])},[t.displayMenu?a("v-list",[t._l(t.getMenuItems(),(function(e,s){return a("v-list-item",{key:s,attrs:{to:e.path}},[a("v-list-item-title",[t._v(t._s(e.title))])],1)})),a("v-list-item",{staticClass:"hidden-md-and-up",attrs:{to:"/profile"}},[a("v-list-item-title",[t._v("Profile")])],1),a("v-list-item",{staticClass:"hidden-md-and-up",attrs:{to:"/login"},on:{click:t.resetState}},[a("v-list-item-title",[t._v("Logout")])],1)],2):t._e()],1)],1),t.displayMenu?a("v-divider",{staticClass:"mx-2 hidden-sm-and-down",attrs:{inset:"",vertical:""}}):t._e(),t.displayMenu?a("v-toolbar-title",{staticClass:"hidden-sm-and-down"},[a("v-tooltip",{staticClass:"hidden-sm-and-down",attrs:{bottom:"","open-on-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({staticClass:"ma-2",attrs:{text:"",icon:"",small:"",to:"/orderEntry"}},s),[a("v-icon",{staticClass:"hidden-sm-and-down"},[t._v("mdi-cart-outline")])],1)]}}],null,!1,374122689)},[a("span",{staticClass:"hidden-sm-and-down"},[t._v("My Order")])])],1):t._e(),a("v-btn",{staticClass:"ma-2 hidden-md-and-up",attrs:{text:"",icon:"",small:"",to:"/orderEntry"}},[a("v-icon",{staticClass:"ma-0 pr-0 hidden-md-and-up",attrs:{dense:"",small:""}},[t._v("mdi-cart-outline")])],1),t.displayAdminMenu?a("v-divider",{staticClass:"mx-2 hidden-sm-and-down",attrs:{inset:"",vertical:""}}):t._e(),t.displayAdminMenu?a("v-toolbar-title",{staticClass:"hidden-sm-and-down"},[a("v-tooltip",{staticClass:"hidden-sm-and-down",attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({staticClass:"ma-2",attrs:{text:"",icon:"",small:"",to:"/orderReport"}},s),[a("v-icon",{staticClass:"hidden-sm-and-down"},[t._v("mdi-account-multiple")])],1)]}}],null,!1,2688027566)},[a("span",[t._v("Order Summary")])])],1):t._e(),t.displayAdminMenu?a("v-btn",{staticClass:"ma-2 hidden-md-and-up",attrs:{text:"",icon:"",small:"",to:"/orderReport"}},[a("v-icon",{staticClass:"hidden-md-and-up",attrs:{small:""}},[t._v("mdi-account-multiple")])],1):t._e(),t.displayAdminMenu?a("v-divider",{staticClass:"mx-2 hidden-sm-and-down",attrs:{inset:"",vertical:""}}):t._e(),t.displayAdminMenu?a("v-toolbar-title",{staticClass:"hidden-sm-and-down"},[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({staticClass:"ma-2",attrs:{text:"",icon:"",small:"",to:"/bulkOrder"}},s),[a("v-icon",{staticClass:"hidden-sm-and-down"},[t._v("mdi-receipt")])],1)]}}],null,!1,1014428656)},[a("span",[t._v("Invoice")])])],1):t._e(),t.displayAdminMenu?a("v-btn",{staticClass:"ma-2 hidden-md-and-up",attrs:{text:"",icon:"",small:"",to:"/bulkOrder"}},[a("v-icon",{staticClass:"hidden-md-and-up",attrs:{small:""}},[t._v("mdi-receipt")])],1):t._e(),t.displayMenu?a("v-divider",{staticClass:"mx-2 hidden-sm-and-down",attrs:{inset:"",vertical:""}}):t._e(),t.displayMenu?a("v-toolbar-title",{staticClass:"hidden-sm-and-down"},[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({staticClass:"ma-2",attrs:{text:"",icon:"",small:"",to:"/packagingByItem"}},s),[a("v-icon",{staticClass:"hidden-sm-and-down"},[t._v("mdi-scale-balance")])],1)]}}],null,!1,2794322352)},[a("span",[t._v("Pack Items")])])],1):t._e(),a("v-btn",{staticClass:"ma-2 hidden-md-and-up",attrs:{text:"",icon:"",small:"",to:"/packagingByItem"}},[a("v-icon",{staticClass:"hidden-md-and-up",attrs:{small:""}},[t._v("mdi-scale-balance")])],1),t.displayMenu?a("v-divider",{staticClass:"mx-2 hidden-sm-and-down",attrs:{inset:"",vertical:""}}):t._e(),t.displayMenu?a("v-toolbar-title",{staticClass:"hidden-sm-and-down"},[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({staticClass:"ma-2",attrs:{text:"",icon:"",small:"",to:"/allUserOrders"}},s),[a("v-icon",{staticClass:"hidden-sm-and-down"},[t._v("mdi-email-outline")])],1)]}}],null,!1,4152172062)},[a("span",[t._v("Send Email")])])],1):t._e(),a("v-btn",{staticClass:"ma-2 hidden-md-and-up",attrs:{text:"",icon:"",small:"",to:"/allUserOrders"}},[a("v-icon",{staticClass:"hidden-md-and-up",attrs:{small:""}},[t._v("mdi-email-outline")])],1),a("v-spacer"),t.displayMenu?a("div",{staticClass:"text-center hidden-sm-and-down"},[a("v-menu",{attrs:{"offset-y":"","open-on-hover":"",transition:"expand-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({attrs:{dense:"",small:"",text:""}},Object.assign({},s)),[a("v-icon",{staticClass:"hidden-sm-and-down",attrs:{dark:""}},[t._v("mdi-account-circle")])],1)]}}],null,!1,1963345738)},[a("v-list",[t._l(t.profileItems,(function(e,s){return a("v-list-item",{key:s,attrs:{to:e.path}},[a("v-list-item-title",[t._v(t._s(e.title))])],1)})),a("v-list-item",{attrs:{to:"/login"},on:{click:t.resetState}},[a("v-list-item-title",[t._v("Logout")])],1)],2)],1)],1):t._e(),a("v-menu",{attrs:{left:"",bottom:""}})],1)],1),a("v-snackbar",{attrs:{id:"header-snackbar","multi-line":t.multiLine},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(this.message)+" "),a("v-btn",{attrs:{color:"red",text:""},on:{click:function(e){t.snackbar=!1}}},[t._v("Close")])],1)],1)},i=[],r=a("2f62"),n={data:()=>({menuItems:[{title:"My Order",path:"/",admin:!1},{title:"Order Summary",path:"/OrderReport",admin:!0},{title:"Bulkorder Invoice",path:"/BulkOrder",admin:!0},{title:"Pack Items",path:"/PackagingByItem",admin:!1},{title:"Send Email",path:"/AllUserOrders",admin:!1},{title:"Reconcile Order",path:"/OrderRecon",admin:!0},{title:"Manage Items",path:"/ManageItems",admin:!0},{title:"Manage Users",path:"/ManageUsers",admin:!0}],profileItems:[{title:"Profile",path:"/profile",admin:!1,onClick:""}],valid:!1,snackbar:!1,message:null,multiLine:!0,isValidUser:!1,displayMenu:!1,displayAdminMenu:!1,viewPortFlag:!0}),created(){this.items=[],this.setDisplayMenu()},mounted(){},updated(){this.isValidUser=this.isUserSignedIn},computed:{...Object(r["d"])({currentUser:"user",isUserSignedIn:"isUserLoggedIn"}),...Object(r["c"])(["getUserName","getCurrentOrder","isAdminUser"]),isPounds:{get(){return this.$store.state.isPounds},set(t){this.$store.commit("togglePounds",t)}},isOrderLocked:{get(){return this.$store.state.isOrderLocked},set(t){this.$store.commit("toggleOrderLocked",t)}}},methods:{...Object(r["b"])(["resetStateAction","updateOrderAction","getOrderStatusAction","getOrdersAction"]),snackMessage:function(t){this.message=t,this.snackbar=!0},setDisplayMenu(){this.isUserSignedIn?(this.displayMenu=!0,this.isAdminUser&&(this.displayAdminMenu=!0)):this.displayMenu=!1},toggleGmsLbs(){this.isPounds=!this.isPounds,console.log(this.isPounds)},getMenuItems(){return this.isAdminUser?this.menuItems:this.menuItems.filter(t=>!1===t.admin)},async toggleOrderLock(){this.isOrderLocked=!this.isOrderLocked,await this.updateOrderAction({id:this.getCurrentOrder.id,orderDt:this.getCurrentOrder.orderDt,cutOffDt:null,orderStatus:this.getCurrentOrder.orderStatus,isLocked:this.isOrderLocked}),1===parseInt(this.isOrderLocked)&&this.snackMessage("Order is Locked!")},resetState:function(){this.resetStateAction(),this.setDisplayMenu(),this.$router.push({path:"/login"})},signInUser:function(){}}},l=n,o=(a("c406"),a("2877")),c=a("6544"),d=a.n(c),m=a("40dc"),u=a("8336"),p=a("b0af"),v=a("ce7e"),h=a("132d"),g=a("8860"),f=a("da13"),y=a("5d23"),b=a("e449"),k=a("2db4"),C=a("2fa4"),I=a("2a7f"),x=a("3a2f"),_=Object(o["a"])(l,s,i,!1,null,"19b23750",null);e["default"]=_.exports;d()(_,{VAppBar:m["a"],VBtn:u["a"],VCard:p["a"],VDivider:v["a"],VIcon:h["a"],VList:g["a"],VListItem:f["a"],VListItemTitle:y["c"],VMenu:b["a"],VSnackbar:k["a"],VSpacer:C["a"],VToolbarTitle:I["a"],VTooltip:x["a"]})},"4ff2":function(t,e,a){"use strict";var s=a("890b"),i=a.n(s);i.a},"56d7":function(t,e,a){"use strict";a.r(e);var s=a("2b0e"),i=a("bc3a"),r=a.n(i);let n={};const l=r.a.create(n);l.interceptors.request.use((function(t){return t}),(function(t){return Promise.reject(t)})),l.interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(t)})),Plugin.install=function(t){t.axios=l,window.axios=l,Object.defineProperties(t.prototype,{axios:{get(){return l}},$axios:{get(){return l}}})},s["a"].use(Plugin);Plugin;var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[t.isUserLoggedIn?a("BaseHeader"):t._e(),a("v-content",[a("router-view")],1),a("BaseFooter")],1)},c=[],d=a("2f62"),m={name:"App",components:{},mounted(){},methods:{...Object(d["b"])(["signInAction"]),track(){this.$ga.page("/")},async signInUser(){var t={email:"bhupathy4444@yahoo.com",password:"test"};await this.signInAction(t)},register(){this.$router.push({path:"register"})}},computed:{...Object(d["d"])({currentUser:"user",isUserLoggedIn:"isUserLoggedIn"}),...Object(d["c"])(["getUserName"])}},u=m,p=a("2877"),v=a("6544"),h=a.n(v),g=a("7496"),f=a("a75b"),y=Object(p["a"])(u,o,c,!1,null,null,null),b=y.exports;h()(y,{VApp:g["a"],VContent:f["a"]});var k=a("8c4f"),C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"mx-auto mt-5",attrs:{width:"400"}},[a("v-card-title",{staticClass:"pb-0"},[a("h2",[t._v("Login")])]),a("v-card-text",{staticClass:"pt-5"},[a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{label:"E-mail","prepend-icon":"mdi-account-circle",required:"",rules:t.emailRules},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.signInUser(e)}},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{attrs:{type:t.showPassword?"text":"password",label:"Password","prepend-icon":"mdi-lock","append-icon":t.showPassword?"mdi-eye":"mdi-eye-off",required:"",rules:t.passwordRules},on:{"click:append":function(e){t.showPassword=!t.showPassword},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.signInUser(e)}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{ref:"login",attrs:{color:"info"},on:{click:t.signInUser}},[t._v("Login")])],1),a("v-snackbar",{attrs:{bottom:!0,right:!0,timeout:4e3},model:{value:t.isMsg,callback:function(e){t.isMsg=e},expression:"isMsg"}},[t._v(" "+t._s(this.msg)+" ")])],1)},I=[],x={name:"Login",data(){return{email:"",password:"",showPassword:!1,errors:[],msg:"",isMsg:!1,valid:!0,emailRules:[t=>!!t||"E-mail is required",t=>/.+@.+\..+/.test(t)||"E-mail must be valid"],passwordRules:[t=>!!t||"Password is required"]}},methods:{...Object(d["b"])(["signInAction"]),async signInUser(){if(this.$refs.form.validate(),this.valid){var t={email:this.email,password:this.password};await this.signInAction(t),null!==this.currentUser&&this.currentUser.id>0?this.$router.push({path:"/"}):(this.msg="Invalid Credentials",this.isMsg=!(""===this.msg))}},async register(){console.log("test"),await this.$router.push({path:"/"}).catch(t=>{throw console.log(t),new Error(`Problem handling something: ${t}.`)})}},created(){},mounted(){},destroyed(){},computed:{...Object(d["d"])({currentUser:"user"})}},_=x,O=a("8336"),w=a("b0af"),P=a("99d9"),A=a("ce7e"),Q=a("4bd4"),U=a("2db4"),F=a("2fa4"),S=a("8654"),V=Object(p["a"])(_,C,I,!1,null,null,null),T=V.exports;h()(V,{VBtn:O["a"],VCard:w["a"],VCardActions:P["a"],VCardText:P["b"],VCardTitle:P["c"],VDivider:A["a"],VForm:Q["a"],VSnackbar:U["a"],VSpacer:F["a"],VTextField:S["a"]});var $=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"mt-12 mx-auto",attrs:{"max-width":"400"}},[a("v-sheet",{staticClass:"v-sheet--offset mx-auto",attrs:{color:"cyan",elevation:"12","max-width":"calc(100% - 32px)"}},[a("v-sparkline",{attrs:{labels:t.labels,value:t.value,color:"white","line-width":"2",padding:"16"}})],1),a("v-card-text",{staticClass:"pt-0"},[a("div",{staticClass:"title font-weight-light mb-2"},[t._v("User Registrations")]),a("div",{staticClass:"subheading font-weight-light grey--text"},[t._v("Last Campaign Performance")]),a("v-divider",{staticClass:"my-2"}),a("v-icon",{staticClass:"mr-2",attrs:{small:""}},[t._v(" mdi-clock ")]),a("span",{staticClass:"caption grey--text font-weight-light"},[t._v("last registration 26 minutes ago")])],1)],1)},E=[],B={data:()=>({labels:["12am","3am","6am","9am","12pm","3pm","6pm","9pm"],value:[200,675,410,390,310,460,250,240]})},L=B,D=(a("2b56"),a("132d")),q=a("8dd9"),M=a("7f2e"),R=Object(p["a"])(L,$,E,!1,null,null,null),N=R.exports;h()(R,{VCard:w["a"],VCardText:P["b"],VDivider:A["a"],VIcon:D["a"],VSheet:q["a"],VSparkline:M["a"]});var j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",{staticClass:"mx-auto mt-12",attrs:{width:"400"}},[a("v-card-title",{staticClass:"pb-0"},[a("h2",[t._v("New User")])]),a("v-card-text",{staticClass:"pt-5"},[a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{label:"FirstName","prepend-icon":"mdi-account-circle",required:"",rules:t.reqRule},model:{value:t.firstname,callback:function(e){t.firstname=e},expression:"firstname"}}),a("v-text-field",{attrs:{label:"LastName","prepend-icon":"mdi-account-circle",required:"",rules:t.reqRule},model:{value:t.lastname,callback:function(e){t.lastname=e},expression:"lastname"}}),a("v-text-field",{attrs:{label:"Email","prepend-icon":"mdi-email",required:"",rules:t.reqRule},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{attrs:{type:t.showPassword?"text":"password",label:"Password","prepend-icon":"mdi-lock","append-icon":t.showPassword?"mdi-eye":"mdi-eye-off",required:"",rules:t.reqRule},on:{"click:append":function(e){t.showPassword=!t.showPassword}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("v-text-field",{attrs:{label:"Phone","prepend-icon":"mdi-phone"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1)],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{color:"success"},on:{click:t.cancel}},[t._v("Cancel")]),a("v-spacer"),a("v-btn",{attrs:{color:"info"},on:{click:[t.validate,t.registerUser]}},[t._v("Add User")])],1),a("v-divider")],1),a("v-snackbar",{attrs:{"multi-line":t.multiLine},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(this.message)+" "),a("v-btn",{attrs:{color:"red",text:""},on:{click:function(e){t.snackbar=!1}}},[t._v("Close")])],1)],1)},z=[];const G="http://phpapi1.bmgtech.ca/index.php/api",K=async function(t){try{const e=await i["post"](G+"/authentication/login",t),a=It(e,200);return a.data}catch(e){return console.error(e),console.error(e.message),null}},H=async function(t){try{const e=await i["post"](G+"/authentication/registration",t),a=It(e,200);return a}catch(e){console.error(e),console.error(e.message)}},W=async function(t){try{const e=await i["put"](`${G}/authentication/user?id=${t.id}`,t),a=It(e,200);return a}catch(e){console.error(e),console.error(e.message)}},J=async function(t){try{const e=await i["get"](`${G}/authentication/user/${t}`);console.log(e);const a=It(e,200);return a}catch(e){console.error(e),console.error(e.message)}},Y=async function(){try{const t=await i["get"](G+"/authentication/users"),e=It(t,200);return e}catch(t){console.error(t),console.error(t.message)}},X=async function(){try{const t=await i["get"](G+"/orderstatus");let e=Ct(t);return e}catch(t){return console.log(t),t.message}},Z=async function(){try{const t=await i["get"](G+"/orders");let e=Ct(t);return e}catch(t){return console.log(t),t.message}},tt=async function(t){var e=null;try{e=await i["post"](G+"/orders",t),console.log(e);const a=It(e,201);return a}catch(a){return console.log(t),console.log(a),a.message}},et=async function(t){try{const e=await i["put"](`${G}/orders?id=${t.id}`,t);return It(e,200),t}catch(e){return console.log(e),e.message}},at=async function(t){try{const e=await i["delete"](`${G}/orders?id=${t.id}`,t);let a=Ct(e);return a}catch(e){return console.log(e),[]}},st=async function(){try{const t=await i["get"](G+"/items");let e=Ct(t);return e}catch(t){return[]}},it=async function(t){try{const e=await i["post"](G+"/items",t),a=It(e,201);return a}catch(e){return console.error(e),null}},rt=async function(t){try{const e=await i["put"](`${G}/items?id=${t.id}`,t);return It(e,200),t}catch(e){return console.error(e),null}},nt=async function(t){try{const e=await i["delete"](`${G}/items?id=${t.id}`,t);let a=Ct(e);return a}catch(e){return console.log(e),[]}},lt=async function(){try{const t=await i["get"](G+"/purchaseorder");let e=Ct(t);return e}catch(t){return[]}},ot=async function(t){try{const e=await i["get"](`${G}/purchaseorderbyorderid/${t}`);let a=Ct(e);return a}catch(e){return[]}},ct=async function(t){try{const e=await i["post"](G+"/purchaseorder",t),a=It(e,201);return a}catch(e){return console.error(e),null}},dt=async function(t){try{const e=await i["put"](`${G}/purchaseorder?id=${t.id}`,t);return It(e,200),t}catch(e){return console.error(e),null}},mt=async function(t){try{const e=await i["post"](`${G}/purchaseorder/calcQty?orderId=${t}`);return It(e,200),!0}catch(e){return console.error(e),null}},ut=async function(t){try{const e=await i["delete"](`${G}/purchaseorder?id=${t.id}`,t);let a=Ct(e);return a}catch(e){return console.log(e),[]}},pt=async function(t,e){try{const a=await i["post"](`${G}/purchaseorder/sendemailOrderPlaced?orderId=${t}&userId=${e}`);let s=Ct(a);return s}catch(a){return console.log(a),[]}},vt=async function(t,e){try{const a=await i["post"](`${G}/purchaseorder/sendemailConsolidatedOrder?orderId=${t}&userId=${e}`);let s=Ct(a);return s}catch(a){return console.log(a),[]}},ht=async function(t,e){try{const a=await i["post"](`${G}/purchaseorder/sendemail?toUserId=${t.userId}&orderId=${t.orderId}&fromUserId=${e}`);let s=Ct(a);return s}catch(a){return console.log(a),[]}},gt=async function(){try{const t=await i["get"](G+"/bulkorder");let e=Ct(t);return e}catch(t){return[]}},ft=async function(t){try{const e=await i["get"](`${G}/bulkorderbyorderid/${t}`);let a=Ct(e);return a}catch(e){return[]}},yt=async function(t){try{const e=await i["post"](G+"/bulkorder",t),a=It(e,201);return a}catch(e){return console.error(e),null}},bt=async function(t){try{const e=await i["put"](`${G}/bulkorder?id=${t.id}`,t);return It(e,200),t}catch(e){return console.error(e),null}},kt=async function(t){try{const e=await i["delete"](`${G}/bulkorder?id=${t.id}`,t);let a=Ct(e);return a}catch(e){return console.log(e),[]}},Ct=t=>{if(200!==t.status)throw Error(t.data);if(!t)return[];let e=t.data;return"object"!==typeof e&&(e=[]),e},It=(t,e)=>{if(t.status!==e)throw Error(t);let a=t;return"object"!==typeof a&&(a=void 0),a.data},xt={signIn:K,register:H,updateUser:W,getUserData:J,getAllUsers:Y,getOrderStatus:X,getOrders:Z,addOrder:tt,updateOrder:et,deleteOrder:at,getItems:st,addItem:it,updateItem:rt,deleteItem:nt,getPurchaseOrder:lt,getPurchaseOrderByOrderId:ot,addPurchaseOrder:ct,updatePurchaseOrder:dt,updateActQty:mt,deletePurchaseOrder:ut,sendEmailConsolidatedOrder:vt,sendEmailOrderPlaced:pt,sendEmailPurchaseOrder:ht,getBulkOrder:gt,getBulkOrderByOrderId:ft,addBulkOrder:yt,updateBulkOrder:bt,deleteBulkOrder:kt};var _t={data(){return{posts:[],errors:[],firstname:"",lastname:"",email:"",password:"",phone:"",errorflag:!1,msg:"",isMsg:!1,form:{firstname:"",email:""},showPassword:!1,reqRule:[t=>!!t||"Required"],valid:!1,snackbar:!1,message:null,multiLine:!0}},methods:{...Object(d["b"])(["registerAction"]),async registerUser(){if(this.msg="",this.$refs.form.validate(),this.valid){var t={firstname:this.firstname,lastname:this.lastname,email:this.email,password:this.password,phone:this.phone};await xt.register(t).then(t=>{this.snackMessage(t.message)})}},submit(){console.log("submit!"),this.$v.$touch(),this.$v.$invalid?this.submitStatus="ERROR":(this.submitStatus="PENDING",setTimeout(()=>{this.submitStatus="OK"},500))},snackMessage:function(t){this.message=t,this.snackbar=!0},checkForm:function(t){if(this.firstname&&this.email)return!0;this.errors=[],this.firstname||this.errors.push("Name required."),this.email||this.errors.push("Email required."),t.preventDefault()},status(t){return{error:t.$error,dirty:t.$dirty}},cancel(){this.$router.push({path:"manageUsers"})},validate(){this.$refs.form.validate()}}},Ot=_t,wt=Object(p["a"])(Ot,j,z,!1,null,null,null),Pt=wt.exports;h()(wt,{VBtn:O["a"],VCard:w["a"],VCardActions:P["a"],VCardText:P["b"],VCardTitle:P["c"],VDivider:A["a"],VForm:Q["a"],VSnackbar:U["a"],VSpacer:F["a"],VTextField:S["a"]});var At=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"about mt-12"},[a("v-spacer"),a("h1",[t._v("Welcome to Vegetable Buying Club!")])],1)},Qt=[],Ut={name:"About"},Ft=Ut,St=Object(p["a"])(Ft,At,Qt,!1,null,null,null),Vt=St.exports;h()(St,{VSpacer:F["a"]});var Tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("BaseManageItems")],1)},$t=[],Et={},Bt=Object(p["a"])(Et,Tt,$t,!1,null,null,null),Lt=Bt.exports,Dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("v-card",{staticClass:"mx-auto mt-5",attrs:{"max-width":"1100",color:"orange",rounded:""}},[a("v-list-item",{attrs:{dense:""}},[a("v-list-item-content",{staticClass:"ma-0 pa-0",attrs:{dens:""}},[a("v-container",{staticClass:"ma-0 pa-0"},[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"pt-3 text-md-center",attrs:{cols:"10"}},[t._v("Manage Users")]),a("v-col",{staticClass:"text-md-center pl-3",attrs:{cols:"2"}},[a("v-toolbar-title",[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({attrs:{text:"",to:"/register"}},s),[a("v-icon",{attrs:{left:""}},[t._v("mdi-plus")])],1)]}}])},[a("span",[t._v("Add New User")])])],1)],1)],1)],1)],1)],1)],1),t.dataReady?a("v-card",{staticClass:"mx-auto ma-3",attrs:{"max-width":"1100",tile:"",dense:"",shaped:""}},[a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[t.isNewPwd?a("div",{staticClass:"text-center"},[a("v-sheet",{attrs:{color:"orange lighten-2"}},[t._v("Password of "+t._s(t.userPwdReset)+" has been reset to "+t._s(t.newPwd))])],1):t._e(),a("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("User Name ")]),a("th",{staticClass:"text-left"},[t._v("Active")]),a("th",{staticClass:"text-left"},[t._v("Packer")]),a("th",{staticClass:"text-left"},[t._v("Password")])])]),a("tbody",t._l(t.users,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.name))]),a("td",[e.active?a("v-icon",{attrs:{color:"green"},on:{click:function(a){return t.toggleIsActive(e)}}},[t._v("mdi-check")]):t._e(),e.active?t._e():a("v-icon",{attrs:{color:"red"},on:{click:function(a){return t.toggleIsActive(e)}}},[t._v("mdi-close")])],1),a("td",[e.isPacker?a("v-icon",{attrs:{color:"green"},on:{click:function(a){return t.toggleIsPacker(e)}}},[t._v("mdi-check")]):t._e(),e.isPacker?t._e():a("v-icon",{attrs:{color:"red"},on:{click:function(a){return t.toggleIsPacker(e)}}},[t._v("mdi-close")])],1),a("td",{staticClass:"ma-0 pa-0"},[a("v-btn",{staticClass:"ma-0 pa-0",attrs:{text:""},on:{click:function(a){return t.resetPwd(e)}}},[a("v-icon",[t._v("mdi-refresh")])],1)],1)])})),0)]},proxy:!0}],null,!1,3167504520)})],1)],1):t._e(),a("v-snackbar",{attrs:{"multi-line":t.multiLine},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(this.message)+" "),a("v-btn",{attrs:{color:"red",text:""},on:{click:function(e){t.snackbar=!1}}},[t._v("Close")])],1)],1)},qt=[],Mt={name:"ManangeUser",data(){return{localUsers:[],header:[{text:"Name",value:"name",align:"start"},{text:"Active",value:"active"},{text:"Packer",value:"isPacker"},{text:"Password",value:"resetpwd"}],users:[],valid:!1,snackbar:!1,message:null,multiLine:!0,isNewPwd:!1,newPwd:"",dialog:!1,userPwdReset:"",dataReady:!1}},async created(){await this.getData()},async mounted(){},methods:{...Object(d["b"])(["updateUserAction"]),async getData(){return await this.getUsers(),this.localUsers.forEach(t=>{this.users.push({name:`${t.firstname} ${t.lastname}`,isAdmin:1===parseInt(t.isAdmin),isPacker:1===parseInt(t.isPacker),active:1===parseInt(t.active),id:t.id,firstname:t.firstname,lastname:t.lastname})}),this.users.sort((function(t,e){return t.name<e.name?-1:t.name>e.name?1:void 0})),this.dataReady=!0,this.users},async getUsers(){await xt.getAllUsers().then(t=>{this.localUsers=t})},async updateUser(t){await xt.updateUser(t)},snackMessage:function(t){this.message=t,this.snackbar=!0},async toggleIsPacker(t){t.isPacker=!t.isPacker,await this.updateUser({id:t.id,isPacker:t.isPacker?1:0,isAdmin:t.isAdmin?1:0,active:t.active?1:0,firstname:t.firstname}),t.isPacker?this.snackMessage("Packer updated!"):this.snackMessage("Packer has been reset")},async toggleIsAdmin(t){t.isAdmin=!t.isAdmin,await this.updateUser({id:t.id,isPacker:t.isPacker?1:0,isAdmin:t.isAdmin?1:0,active:t.active?1:0,firstname:t.firstname,lastname:t.lastname}),this.snackMessage("Update Successful1!")},async toggleIsActive(t){if(t.active=!t.active,t.active)console.log("user being made active"),await this.passwordReset(t,`Do you want to make ${t.name} active?`)&&(this.snackMessage(t.name+" has been made active. Please note the password above."),this.isNewPwd=!0,this.userPwdReset=t.name);else{let e=await this.passwordReset(t,`Are you sure you want to make ${t.name} inactive?`);e?(this.isNewPwd=!1,this.snackMessage(t.name+" has been made inactive")):t.active=!t.active}},async passwordReset(t,e){var a=confirm(""+e);return 1==a&&(this.newPwd=this.generatePassword,await this.updateUser({id:t.id,isPacker:t.isPacker?1:0,isAdmin:t.isAdmin?1:0,active:t.active?1:0,firstname:t.firstname,password:this.newPwd,lastname:t.lastname}),!0)},async resetPwd(t){await this.passwordReset(t,`Are you sure you want to reset the password for ${t.name}?`)&&(this.snackMessage("Password has been reset Successfully! Please note the password above."),this.isNewPwd=!0,this.userPwdReset=t.name)}},computed:{...Object(d["d"])(["user"]),generatePassword(){for(var t=8,e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",a="",s=0,i=e.length;s<t;++s)a+=e.charAt(Math.floor(Math.random()*i));return a}}},Rt=Mt,Nt=a("62ad"),jt=a("a523"),zt=a("da13"),Gt=a("5d23"),Kt=a("0fd9"),Ht=a("1f4f"),Wt=a("2a7f"),Jt=a("3a2f"),Yt=Object(p["a"])(Rt,Dt,qt,!1,null,"be9cc5aa",null),Xt=Yt.exports;h()(Yt,{VBtn:O["a"],VCard:w["a"],VCol:Nt["a"],VContainer:jt["a"],VForm:Q["a"],VIcon:D["a"],VListItem:zt["a"],VListItemContent:Gt["a"],VRow:Kt["a"],VSheet:q["a"],VSimpleTable:Ht["a"],VSnackbar:U["a"],VToolbarTitle:Wt["a"],VTooltip:Jt["a"]});var Zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.pageLoaded?a("v-form",{model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-card",{staticClass:"mx-auto mt-4",attrs:{"max-width":"1100",color:"orange",rounded:""}},[a("v-list-item",{attrs:{dense:""}},[a("v-list-item-content",{staticClass:"ma-0 pa-0",attrs:{dens:""}},[a("v-row",[a("v-col",{staticClass:"pt-14 text-md-center",attrs:{cols:"12"}},[t._v("My Order")])],1)],1)],1)],1),t.isOrderLocked?a("div",{staticClass:"text-center mx-auto mt-3"},[a("v-sheet",[a("div",{staticStyle:{color:"red"}},[t._v("This order is now locked. We will let you know when we are ready for the next order.")])])],1):t._e(),t.isTestOrder?a("div",{staticClass:"text-center mx-auto mt-3"},[a("v-sheet",[a("div",{staticStyle:{color:"red"}},[t._v("This is a test order, do not place your order yet..")])])],1):t._e(),a("v-card",{staticClass:"mx-auto mt-3",attrs:{"max-width":"1100",tile:"",dense:"",shaped:""}},[a("v-list-item",{attrs:{dense:""}},[a("v-list-item-content",{staticClass:"ma-0 pa-0",attrs:{dens:""}},[a("v-container",{staticClass:"ma-0 pa-0"},[a("v-row",[a("v-col",{staticClass:"text-md-center",attrs:{cols:"5"}},[t._v("Item")]),a("v-col",{staticClass:"text-md-center",attrs:{cols:"4"}},[t._v("Quantity")]),a("v-col",{staticClass:"text-md-right",attrs:{cols:"3"}},[t._v("Total ($)")])],1)],1)],1)],1)],1),a("v-card",{staticClass:"mx-auto mt-2",attrs:{"max-width":"1100",tile:"",dense:"",shaped:""}},[t._l(t.localItems,(function(e){return a("v-list-item",{key:e.id,attrs:{dense:""}},[a("v-list-item-content",{staticClass:"ma-0 pa-0",attrs:{dense:""}},[a("v-container",{staticClass:"ma-0 pa-0"},[a("v-row",{staticClass:"ma-0 pa-0"},[a("v-col",{staticClass:"mb-0 pb-0 text-md-left",attrs:{cols:"5"}},[a("v-checkbox",{staticClass:"ma-0 pa-0",staticStyle:{"font-size":"10px"},attrs:{label:e.name,value:e.id,dense:""},on:{change:t.validateForm},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1),a("v-col",{staticClass:"text-md-end mb-0 pb-0",attrs:{cols:"4"}},[a("v-flex",{staticClass:"text-xl-left",attrs:{shrink:""}},[a("v-text-field",{staticClass:"ma-0 pa-0 text-md-right",attrs:{label:e.defaultUnits,"hide-details":"auto",value:parseFloat(e.qty).toFixed(2),color:"success",rules:t.qtyRules(e),dense:"",outlined:"",type:"decimal",onclick:"this.select();"},on:{change:function(a){return t.calcItemPrice(e)}},model:{value:e.qty,callback:function(a){t.$set(e,"qty",a)},expression:"item.qty"}})],1)],1),a("v-col",{staticClass:"mb-0 pt-6 text-sm-right hidden-md-and-up",attrs:{cols:"3"}},[t._v(t._s(e.totalPrice))]),a("v-col",{staticClass:"mb-0 pb-0 text-md-right hidden-sm-and-down",attrs:{cols:"3"}},[t._v("$ "+t._s(e.totalPrice))])],1)],1),a("v-divider")],1)],1)})),a("v-divider"),a("v-list-item",{attrs:{dense:""}},[a("v-list-item-content",{staticClass:"ma-0 pa-0",attrs:{dens:""}},[a("v-container",{staticClass:"ma-0 pa-0"},[a("v-row",[a("v-col",{staticClass:"pr-9",staticStyle:{"font-weight":"bold","text-align":"right"},attrs:{cols:"12"}},[t._v("Approximate Total - $"+t._s(t.grandTotal))])],1)],1),a("v-divider")],1)],1),a("v-list-item",{attrs:{dense:""}},[a("v-list-item-content",{staticClass:"ma-0 pa-0",attrs:{dens:""}},[a("v-container",{staticClass:"ma-0 pa-0"},[a("v-row",[a("v-col",{staticClass:"mb-0 pb-3",attrs:{cols:"12"}},[t.isOrderLocked?t._e():a("v-btn",{staticClass:"float-right",attrs:{color:"success",loading:t.placingOrder,disabled:!t.valid||t.placingOrder},on:{click:function(e){return t.sendAndEmail()}},scopedSlots:t._u([{key:"loader",fn:function(){return[a("span",[t._v("Sending Email...")])]},proxy:!0}],null,!1,3203012457)},[t._v(" Place Order ")])],1)],1)],1),a("v-divider")],1)],1)],2)],1):t._e(),a("v-snackbar",{attrs:{"multi-line":t.multiLine,top:"",timeout:9e3},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(this.message)+" "),a("v-btn",{attrs:{color:"red",text:""},on:{click:function(e){t.snackbar=!1}}},[t._v("Close")])],1)],1)},te=[],ee={name:"OrderEntry",data(){return{valid:!1,selected:[],localItem:{id:0,name:"",minQty:0,qty:0,defaultUnits:0,price:0,totalPrice:0},bulkItem:{id:0,orderId:0,itemId:0,actQty:0,actPrice:0,isCancelled:0},localItems:[],tempPO:{id:0,orderId:0,itemId:0,userId:0,qty:0,actQty:0,actPrice:0,isCancelled:0},snackbar:!1,message:null,multiLine:!0,isOrderLocked:!1,placingOrder:!1,pageLoaded:!1,isTestOrder:!1}},mounted(){this.validateForm(),0===this.localItems.length&&this.getItems()},async created(){},methods:{...Object(d["b"])(["getItemsAction","getOrdersAction","getOrderStatusAction","getPurchaseOrderByOrderIdAction","getBulkOrderByOrderIdAction","addPurchaseOrderAction","addBulkOrderAction","updatePurchaseOrderAction"]),calcItemPrice:function(t){if(isNaN(t.qty))return 0;t.totalPrice=(parseFloat(t.price)*parseFloat(t.qty)).toFixed(2)},snackMessage:function(t){this.message=t,this.snackbar=!0},qtyRules(t){let e=t.minQty,a=t.maxQty,s=[t=>!isNaN(t)||"Please enter a number",a=>!(a<e)||`Min Qty ${t.minQty} ${t.defaultUnits}`,e=>0===a||(!(e>a)||`Max Qty ${t.maxQty} ${t.defaultUnits}`)];return s},setSelectedItems(){this.getPurchaseOrderByUser.forEach(t=>{0===parseInt(t.isCancelled)&&this.selected.push(t.itemId)})},validateForm(){let t=this.purchaseOrders.find(t=>0===parseInt(t.isCancelled)&&t.userId===this.user.id);t?this.valid=!0:0===this.selected.length?this.valid=!1:this.valid=!0,this.localItems.forEach(t=>{-1===this.selected.indexOf(t.id)?(t.qty=t.minQty.toFixed(2),t.totalPrice=(0).toFixed(2)):t.totalPrice=(t.qty*t.price).toFixed(2)})},setOrderLock:function(){this.isOrderLocked=1===parseInt(this.getCurrentOrder.isLocked)},getItemPrice(t,e,a,s){if(this.selected.find(t=>t===s)){let s=t>0?t:parseFloat(e);return(parseFloat(s)*parseFloat(a)).toFixed(2)}return(0).toFixed(2)},async getItems(){await this.getOrderStatusAction(),await this.getOrdersAction(),await this.getItemsAction(),await this.setOrderLock(),await this.getPurchaseOrderByOrderIdAction(this.getCurrentOrder.id),await this.getBulkOrderByOrderIdAction(this.getCurrentOrder.id),this.setSelectedItems();let t=this.getPurchaseOrderByUser;this.getActiveItems.forEach(e=>{let a=t.find(t=>t.itemId===e.id);-1===this.localItems.indexOf(t=>parseInt(t.id)===parseInt(e.id))&&(a?this.localItems.push({id:e.id,name:e.name,minQty:parseFloat(e.minQty),maxQty:parseFloat(e.maxQty),qty:a.qty>0?a.qty:parseFloat(e.minQty),defaultUnits:e.defaultUnits,price:parseFloat(e.price),totalPrice:this.getItemPrice(a.qty,e.minQty,e.price,e.id)}):this.localItems.push({id:e.id,name:e.name,minQty:parseFloat(e.minQty),maxQty:parseFloat(e.maxQty),qty:parseFloat(e.minQty).toFixed(2),defaultUnits:e.defaultUnits,price:parseFloat(e.price),totalPrice:this.getItemPrice(0,e.minQty,e.price,e.id)}))}),this.localItems.sort((function(t,e){return t.name<e.name?-1:t.name>e.name?1:0})),this.pageLoaded=!0},async saveOrder(){if(await this.validateForm(),await this.user){var t=[];this.selected.length>0&&this.selected.forEach(e=>{(0===t.length||t.find(t=>parseInt(t.id)!==parseInt(e)))&&t.push(this.localItems.find(t=>parseInt(t.id)===parseInt(e)))}),await t.length>0&&await t.forEach(t=>{var e=this.getPurchaseOrderByUser.find(e=>e.orderId===this.getCurrentOrder.id&&e.itemId===t.id&&e.userId===this.user.id);e?(e.id&&(this.tempPO={id:e.id,orderId:this.getCurrentOrder.id,itemId:t.id,userId:this.user.id,qty:t.qty,actQty:e.actQty,suggestedQty:e.suggestedQty,actPrice:0,isCancelled:0}),this.updatePurchaseOrderAction(this.tempPO),this.snackMessage("Thank you for your Order! We'll email you, when it is ready for pick up. Please note, items are subject to availability and prices shown here are approximate. A copy of the order has been emailed to you.")):(this.addPurchaseOrderAction({orderId:this.getCurrentOrder.id,itemId:t.id,qty:t.qty,actQty:0,suggestedQty:0,actPrice:0,userId:this.user.id,isCancelled:0}),0!==this.bulkOrders.length&&this.bulkOrders.find(e=>parseInt(e.itemId)===parseInt(t.id))||this.addBulkOrderAction({orderId:this.getCurrentOrder.id,itemId:t.id,actQty:0,actPrice:t.price,isCancelled:0,totalPrice:0}))}),await this.getPurchaseOrderByUser.forEach(e=>{t.find(t=>t.id===e.itemId)||(e.id&&(this.tempPO={id:e.id,orderId:this.getCurrentOrder.id,itemId:e.itemId,userId:this.user.id,qty:e.qty,actQty:e.actQty,actPrice:0,isCancelled:1}),this.updatePurchaseOrderAction(this.tempPO).then()),0===this.selected.length&&this.snackMessage("Data Updated.")})}},async sendAndEmail(){this.placingOrder=!0;let t=t=>new Promise(e=>setTimeout(e,t));await this.saveOrder(),await t(1e4),await xt.sendEmailOrderPlaced(this.getCurrentOrder.id,this.user.id).catch(t=>{console.log(t),this.snackMessage("Failed to send Email.")}),this.placingOrder=!1}},computed:{...Object(d["d"])(["items","user","purchaseOrders","bulkOrders","isPounds"]),...Object(d["c"])(["getCurrentOrder","getUserName","getActiveItems"]),getPurchaseOrderByUser(){return this.purchaseOrders.filter(t=>t.userId===this.user.id)},getHeaderText:function(){return this.isOrderLocked?"<p class='font-weight-black'>(This Order is Locked)</p>":""},grandTotal:function(){var t=0,e=[];return this.selected.length>0&&this.selected.forEach(t=>{e.push(this.localItems.find(e=>parseInt(e.id)===parseInt(t)))}),e.length>0&&e.forEach(e=>{e&&(t+=parseFloat(e.totalPrice))}),t.toFixed(2)}}},ae=ee,se=(a("b2de"),a("ac7c")),ie=a("0e8f"),re=Object(p["a"])(ae,Zt,te,!1,null,"0af8288a",null),ne=re.exports;h()(re,{VBtn:O["a"],VCard:w["a"],VCheckbox:se["a"],VCol:Nt["a"],VContainer:jt["a"],VDivider:A["a"],VFlex:ie["a"],VForm:Q["a"],VListItem:zt["a"],VListItemContent:Gt["a"],VRow:Kt["a"],VSheet:q["a"],VSnackbar:U["a"],VTextField:S["a"]});var le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.pageLoaded&&1===parseInt(this.getCurrentOrder.isLocked)?a("v-form",{model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-divider"),a("v-card",{staticClass:"mx-auto mt-5",attrs:{"max-width":"1100",dense:"",color:"orange",rounded:""}},[a("v-list-item",{attrs:{dense:""}},[a("v-list-item-content",{staticClass:"ma-0 pa-0",attrs:{dens:""}},[a("v-container",{staticClass:"ma-0 pa-0"},[a("v-row",[a("v-col",{staticClass:"text-md-center",attrs:{cols:"12"}},[t._v(" Bulkorder Invoice "),a("v-btn",{attrs:{text:""},on:{click:t.generatePdf}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-file-pdf")])],1)],1)],1)],1)],1)],1)],1),a("v-card",{staticClass:"mx-auto mt-3",attrs:{"max-width":"1100",tile:"",dense:"",shaped:""}},[a("v-list-item",{attrs:{dense:""}},[a("v-list-item-content",{staticClass:"ma-0 pa-0",attrs:{dens:""}},[a("v-container",{staticClass:"ma-0 pa-0"},[a("v-row",[a("v-col",{staticClass:"hidden-md-and-up",staticStyle:{"font-size":"12px"},attrs:{cols:"4"}},[t._v("Item")]),a("v-col",{staticClass:"hidden-sm-and-down",attrs:{cols:"4"}},[t._v("Item")]),a("v-col",{staticClass:"text-md-center hidden-sm-and-down",attrs:{cols:"2"}},[t._v("Ordered Qty")]),a("v-col",{staticClass:"text-md-center hidden-md-and-up",staticStyle:{"font-size":"12px"},attrs:{cols:"2"}},[t._v("Ord Qty")]),a("v-col",{staticClass:"text-md-center hidden-md-and-up",staticStyle:{"font-size":"12px"},attrs:{cols:"3"}},[t._v("Act Qty")]),a("v-col",{staticClass:"text-md-center hidden-sm-and-down",attrs:{cols:"3"}},[t._v("Act Qty")]),a("v-col",{staticClass:"text-md-center hidden-sm-and-down",attrs:{cols:"3"}},[t._v("Total ($)")]),a("v-col",{staticClass:"text-md-center hidden-md-and-up",staticStyle:{"font-size":"12px"},attrs:{cols:"3"}},[t._v("Total ($)")])],1)],1)],1)],1)],1),a("v-card",{staticClass:"mx-auto mt-1",attrs:{"max-width":"1100",tile:"",dense:"",shaped:""}},[t._l(t.localItems,(function(e){return a("v-list-item",{key:e.id,attrs:{dense:""}},[a("v-list-item-content",{staticClass:"ma-0 pa-0",attrs:{dens:""}},[a("v-container",{staticClass:"ma-0 pa-0"},[a("v-row",{staticClass:"ma-0 pa-0",attrs:{cols:"4"}},[a("v-col",{staticClass:"mt-2 hidden-md-and-up",staticStyle:{"font-size":"12px"}},[a("div",{staticClass:"tooltip"},[t._v(" "+t._s(e.name.length>15?e.name.substring(0,15)+"...":e.name)+" "),a("span",{staticClass:"tooltiptext"},[t._v(t._s(e.name))])])]),a("v-col",{staticClass:"mt-2 hidden-sm-and-down"},[t._v(t._s(e.name))]),a("v-col",{staticClass:"mt-2 pb-0 text-md-center hidden-md-and-up",staticStyle:{"font-size":"12px"},attrs:{cols:"2"}},[t._v(t._s(e.qty)+" "+t._s(e.defaultUnits))]),a("v-col",{staticClass:"mt-2 pb-0 text-md-center hidden-sm-and-down",attrs:{cols:"2"}},[t._v(t._s(e.qty)+" "+t._s(e.defaultUnits))]),a("v-col",{staticClass:"mb-0 pb-2 hidden-sm-and-down",attrs:{cols:"3"}},[a("v-text-field",{staticClass:"textActQty ma-0 pa-0 text-xl-left",attrs:{"hide-details":"auto",value:parseInt(e.qty).toFixed(2),color:"success",dense:"",outlined:"",rules:t.rules,onclick:"this.select();"},on:{change:function(a){return t.calcItemPrice(e)}},model:{value:e.actQty,callback:function(a){t.$set(e,"actQty",a)},expression:"item.actQty"}})],1),a("v-col",{staticClass:"mb-0 pb-2 hidden-md-and-up",attrs:{cols:"3"}},[a("v-text-field",{staticClass:"textActQty text-xs-center ma-0 pa-0",staticStyle:{"font-size":"14px",border:"1px solid","border-radius":"3px","text-align":"end"},attrs:{"hide-details":"auto",value:parseInt(e.qty).toFixed(2),color:"success","background-color":"grey lighten-4",height:"26",onclick:"this.select();",rules:t.rules},on:{change:function(a){return t.calcItemPrice(e)}},model:{value:e.actQty,callback:function(a){t.$set(e,"actQty",a)},expression:"item.actQty"}})],1),a("v-col",{staticClass:"mb-0 pb-0 hidden-sm-and-down text-md-center",attrs:{cols:"3"}},[a("div",{staticClass:"mb-0 pb-0 hidden-sm-and-down text-md-center",staticStyle:{"text-align":"center"}},[a("v-text-field",{staticClass:"ma-0 pa-0",attrs:{"hide-details":"auto",value:parseInt(e.totalPrice).toFixed(2),label:"",height:"26",dense:"",outlined:"",onclick:"this.select();",rules:t.rules},on:{change:function(a){return t.calcItemPrice(e)}},model:{value:e.totalPrice,callback:function(a){t.$set(e,"totalPrice",a)},expression:"item.totalPrice"}})],1)]),a("v-col",{staticClass:"mb-0 pb-0 hidden-md-and-up",attrs:{cols:"3"}},[a("v-text-field",{staticClass:"ma-0 pa-0",staticStyle:{"font-size":"14px",border:"1px solid","border-radius":"3px",display:"block","text-decoration":"none","text-align":"center !default"},attrs:{"hide-details":"auto",value:parseInt(e.totalPrice).toFixed(2),label:"",height:"26","background-color":"grey lighten-4","single-line":"",onclick:"this.select();",rules:t.rules},on:{change:function(a){return t.calcItemPrice(e)}},model:{value:e.totalPrice,callback:function(a){t.$set(e,"totalPrice",a)},expression:"item.totalPrice"}})],1)],1)],1),a("v-divider")],1)],1)})),a("v-divider"),a("v-list-item",{attrs:{dense:""}},[a("v-list-item-content",{staticClass:"ma-0 pa-0",attrs:{dens:""}},[a("v-container",{staticClass:"ma-0 pa-0"},[a("v-row",[a("v-col",{staticStyle:{"font-weight":"bold","text-align":"right"},attrs:{cols:"12"}},[t._v("Total - $"+t._s(t.grandTotal))])],1)],1),a("v-divider")],1)],1),a("v-list-item",{attrs:{dense:""}},[a("v-list-item-content",{staticClass:"ma-0 pa-0",attrs:{dens:""}},[a("v-container",{staticClass:"ma-0 pa-0"},[a("v-row",[a("v-col",{staticClass:"mb-0 pb-0",attrs:{cols:"4"}}),a("v-col",{staticClass:"mb-0 pb-0",attrs:{cols:"2"}}),a("v-col",{staticClass:"mb-0 pb-0",attrs:{cols:"2"}}),a("v-col",{staticClass:"mb-0 pb-0",attrs:{cols:"2"}}),a("v-col",{staticClass:"mb-0 pb-3",attrs:{cols:"2"}},[a("v-btn",{staticClass:"float-right",attrs:{color:"success",disabled:!t.valid},on:{click:function(e){return t.saveBo()}}},[t._v("Save")])],1)],1)],1),a("v-divider")],1)],1)],2)],1):t._e(),0===parseInt(this.getCurrentOrder.isLocked)?a("v-form",{model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-card",{staticClass:"mx-auto mt-4",attrs:{"max-width":"344",outlined:""}},[a("v-list-item",{attrs:{"three-line":""}},[a("v-list-item-content",[a("v-list-item-title",{staticClass:"headline mb-1"},[t._v("Order is Not Locked")]),a("v-list-item-subtitle",[t._v("Please lock the order from Order Summary page before accessing this page.")])],1)],1)],1)],1):t._e(),a("v-snackbar",{attrs:{"multi-line":t.multiLine},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(this.message)+" "),a("v-btn",{attrs:{color:"red",text:""},on:{click:function(e){t.snackbar=!1}}},[t._v("Close")])],1)],1)},oe=[],ce=a("e511"),de={name:"BulkOrder",data(){return{valid:!1,localItems:[],itemQty:[],snackbar:!1,message:null,multiLine:!0,tempBO:{id:0,orderId:0,itemId:0,actQty:0,actPrice:0,isCancelled:0},pageLoaded:!1,rules:[t=>!isNaN(t)||"Please enter a number"],pdfColumns:[],pdfRows:[],prfRow:{actPrice:"",actPriceFinal:"",actQty:"",defaultUnits:"",id:"",isCancelled:"",itemId:"",name:"",orderId:"",qty:"",totalPrice:""}}},mounted(){this.getQtyByItem(),this.getItemsAction(),this.getItems()},created(){},methods:{...Object(d["b"])(["getItemsAction","getOrdersAction","getOrderStatusAction","getPurchaseOrderByOrderIdAction","getBulkOrderByOrderIdAction","updateBulkOrderAction"]),calcItemPrice:function(t){parseInt(t.actQty)>0&&(t.actPrice=(parseFloat(t.totalPrice)/parseFloat(t.actQty)).toFixed(4))},getItemById:function(t){return this.items.find(e=>e.id===t)},getQtyByItem(){this.itemQty=[],this.purchaseOrders.forEach(t=>{if(0===parseFloat(t.isCancelled))if(0!==this.itemQty.length&&this.itemQty.find(e=>e.itemId===t.itemId)){let e=this.itemQty.find(e=>e.itemId===t.itemId);e.qty=parseFloat(e.qty)+parseFloat(t.qty)}else this.itemQty.push({itemId:t.itemId,qty:parseFloat(t.qty)})})},updateQty(){xt.updateActQty(this.getCurrentOrder.id)},async saveBo(){await this.localItems.forEach(t=>{this.tempBO={id:t.id,orderId:t.orderId,itemId:t.itemId,actQty:parseFloat(t.actQty),actPrice:parseFloat(t.actPrice),actPriceFinal:parseFloat(t.actPriceFinal),totalPrice:parseFloat(t.totalPrice),isCancelled:t.isCancelled},this.updateBulkOrderAction(this.tempBO)});let t=t=>new Promise(e=>setTimeout(e,t));await t(1e3),await this.updateQty(),this.snackMessage("Updated Data!")},snackMessage:function(t){this.message=t,this.snackbar=!0},generatePdf(){var t=new ce("p","pt","A4");t.setProperties({title:"Vegetable Buying Club Invoice - Order No: "+this.getCurrentOrder.id,subject:"Order Invoice",author:"Vegetable Buying Club",keywords:"generated, javascript, web 2.0, ajax",creator:"MEEE"}),t.setFont("PTSans"),t.setFontSize(10),t.setFontStyle("italic"),t.text("Vegetable Buying Club Invoice - Order No: "+this.getCurrentOrder.id,200,15),t.autoTable({headStyles:{valign:"middle",halign:"center"},columnStyles:{totalPrice:{halign:"right"},qty:{halign:"center"},actQty:{halign:"center"}},styles:{fontSize:8,cellWidth:"auto",font:"helvetica"},theme:"striped",body:this.pdfRows,columns:this.pdfColumns}),t.save(`OrderSummary_${this.getCurrentOrder.id}.pdf`)},async getItems(){await this.getOrderStatusAction(),await this.getOrdersAction(),await this.getPurchaseOrderByOrderIdAction(this.getCurrentOrder.id),await this.getBulkOrderByOrderIdAction(this.getCurrentOrder.id),this.getActiveBulkOrders.forEach(t=>{if(t&&(0===this.localItems.length||!this.localItems.find(e=>{e.id,t.id}))){let e=this.itemQty.find(e=>e.itemId===t.itemId);e&&this.localItems.push({id:t.id,itemId:t.itemId,name:this.getItemById(t.itemId).name,defaultUnits:this.getItemById(t.itemId).defaultUnits,orderId:t.orderId,qty:e?e.qty:0,actQty:t.actQty>0?parseFloat(t.actQty):null,totalPrice:t.totalPrice>0?parseFloat(t.totalPrice):null,isCancelled:t.isCancelled,actPrice:t.actQty>0?(parseFloat(t.totalPrice)/parseFloat(t.actQty)).toFixed(4):0,actPriceFinal:parseFloat(t.actPriceFinal).toFixed(2)})}}),this.pageLoaded=!0,this.pdfColumns.push({title:"Item",dataKey:"name"},{title:"Ordered Qty",dataKey:"qty"},{title:"Actual Qty",dataKey:"actQty"},{title:"Total",dataKey:"totalPrice"}),this.localItems.sort((function(t,e){return t.name<e.name?-1:t.name>e.name?1:0})),this.localItems.forEach(t=>{this.pdfRows.push({name:t.name+" ",qty:`${t.qty} ${t.defaultUnits} `,actQty:`${t.actQty} ${t.defaultUnits}`,totalPrice:t.totalPrice?"$ "+t.totalPrice.toFixed(2):0,defaultUnits:t.defaultUnits})});let t={actQty:"",defaultUnits:"",name:"",qty:"",totalPrice:"Total: $ "+this.grandTotal};return this.pdfRows.push(t),this.localItems}},computed:{...Object(d["d"])(["bulkOrders","items","purchaseOrders"]),...Object(d["c"])(["getCurrentOrder","getActiveItems","getActiveBulkOrders"]),grandTotal:function(){var t=0;return this.localItems.forEach(e=>{e&&e.totalPrice&&(isNaN(e.totalPrice)||(t+=parseFloat(e.totalPrice)))}),t.toFixed(2)}}},me=de,ue=(a("0e57"),Object(p["a"])(me,le,oe,!1,null,null,null)),pe=ue.exports;h()(ue,{VBtn:O["a"],VCard:w["a"],VCol:Nt["a"],VContainer:jt["a"],VDivider:A["a"],VForm:Q["a"],VIcon:D["a"],VListItem:zt["a"],VListItemContent:Gt["a"],VListItemSubtitle:Gt["b"],VListItemTitle:Gt["c"],VRow:Kt["a"],VSnackbar:U["a"],VTextField:S["a"]});var ve=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-container",[a("v-card",{staticClass:"mx-auto float-center",attrs:{"max-width":"644"}},[a("v-list-item",{attrs:{"two-line":""}},[a("v-list-item-content",[a("div",{staticClass:"overline mb-4"},[t._v("Current Order")]),a("v-list-item-title",{staticClass:"headline mb-1"},[t._v("Order Id: "+t._s(t.curActiveOrder.id))]),a("v-list-item-subtitle",[t._v("Order Date: "+t._s(t.curActiveOrder.orderDt))])],1)],1),a("v-card-actions",[a("v-btn",{staticClass:"green"},[t._v("Details")])],1)],1),a("v-expansion-panels",{staticClass:"mb-6 pa-6"},[a("v-expansion-panel",[a("v-expansion-panel-header",{attrs:{"disable-icon-rotate":""},scopedSlots:t._u([{key:"actions",fn:function(){return[a("v-icon",{attrs:{color:"red"}},[t._v("$expand")])]},proxy:!0}])},[t._v(" Previous Orders ")]),a("v-expansion-panel-content",t._l(t.orders,(function(e){return a("div",{key:e.id},[a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"1044",rounded:""}},[a("v-list-item",{attrs:{"single-line":""}},[a("v-list-item-content",{staticClass:"ma-0 pa-0"},[a("div",{staticClass:"overline mb-4"},[t._v("ORDER No")]),a("v-row",[a("v-col",{attrs:{cols:"4"}},[t._v(t._s(e.id))]),a("v-col",{staticClass:"float-right",attrs:{cols:"4"}},[t._v(t._s(e.orderDt))]),a("v-col",{attrs:{cols:"4"}},[a("v-btn",{staticClass:"yellow float-right"},[t._v("Details")])],1)],1)],1)],1)],1)],1)})),0)],1)],1)],1)],1)},he=[],ge={name:"Orders",data(){return{order:"",curActiveOrder:""}},mounted(){this.getOrderStatusAction(),this.getOrdersAction(),this.curActiveOrder=this.getCurrentOrder},methods:{...Object(d["b"])(["addOrderAction","getOrdersAction","getOrderStatusAction"]),getTodaysDate(){var t=new Date,e=String(t.getDate()).padStart(2,"0"),a=String(t.getMonth()+1).padStart(2,"0"),s=t.getFullYear();return t=a+"/"+e+"/"+s,t},createNewOrder(){this.addOrderAction({orderDt:(new Date).toJSON(),orderStatus:this.getActiveOrderStatus.id})},getOrderStatus(t){return t>0?this.orderstatus.find(e=>e.id===t):{status:"none"}}},computed:{...Object(d["d"])(["orders","orderstatus"]),...Object(d["c"])(["getActiveOrderStatus","getCurrentOrder"])}},fe=ge,ye=a("cd55"),be=a("49e2"),ke=a("c865"),Ce=a("0393"),Ie=Object(p["a"])(fe,ve,he,!1,null,"39adfc29",null),xe=Ie.exports;h()(Ie,{VBtn:O["a"],VCard:w["a"],VCardActions:P["a"],VCol:Nt["a"],VContainer:jt["a"],VExpansionPanel:ye["a"],VExpansionPanelContent:be["a"],VExpansionPanelHeader:ke["a"],VExpansionPanels:Ce["a"],VIcon:D["a"],VListItem:zt["a"],VListItemContent:Gt["a"],VListItemSubtitle:Gt["b"],VListItemTitle:Gt["c"],VRow:Kt["a"]});var _e=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",{staticClass:"mx-auto mt-5",attrs:{"max-width":"1100",color:"orange",rounded:""}},[a("v-list-item",{attrs:{dense:""}},[a("v-list-item-content",{staticClass:"ma-0 pa-0",attrs:{dens:""}},[a("v-container",{staticClass:"ma-0 pa-0"},[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"ma-0 pt-2 text-md-center hidden-sm-and-down",attrs:{cols:"10"}},[t._v("Final Check & Email")]),a("v-col",{staticClass:"ma-0 pt-2 text-sm-center hidden-md-and-up",attrs:{cols:"10"}},[t._v("Final Check & Email")]),a("v-col",{staticClass:"ma-0 pt-1 text-md-center hidden-sm-and-down",attrs:{cols:"1"}},[a("v-btn",{staticClass:"ma-0",attrs:{color:"primary",small:""},on:{click:function(e){e.stopPropagation(),t.dialog=!0}}},[a("v-icon",{on:{click:function(e){return t.setReadyToSendEmailFlag()}}},[t._v("mdi-email")])],1),a("v-dialog",{attrs:{"max-width":"290",modal:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline",attrs:{color:"red"}},[t._v(" Send Email "),a("v-spacer"),t.readyToSendEmail?a("v-icon",{attrs:{color:"green",large:""}},[t._v("mdi-email-alert")]):t._e(),t.readyToSendEmail?t._e():a("v-icon",{attrs:{color:"red",large:""}},[t._v("mdi-email-alert")])],1),t.readyToSendEmail?a("v-card-text",[t._v('"Are you ready to send email?"')]):t._e(),t.readyToSendEmail?t._e():a("v-card-text",[t._v("Looks like there are items that needs to be packed")]),t.readyToSendEmail?a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){e.stopPropagation(),t.dialog=!1}}},[t._v("No")]),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){t.sendEmailAll(),t.dialog=!1}}},[t._v("Yes")])],1):t._e()],1)],1)],1),a("v-col",{staticClass:"ma-0 pt-0 text-sm-center hidden-md-and-up",attrs:{cols:"2"}},[a("v-btn",{staticClass:"ma-0",attrs:{color:"primary",small:""},on:{click:function(e){e.stopPropagation(),t.dialog=!0}}},[a("v-icon",{on:{click:function(e){return t.setReadyToSendEmailFlag()}}},[t._v("mdi-email")])],1),a("v-dialog",{attrs:{"max-width":"290",modal:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline",attrs:{color:"red"}},[t._v(" Send Email "),a("v-spacer"),t.readyToSendEmail?a("v-icon",{attrs:{color:"green",large:""}},[t._v("mdi-email-alert")]):t._e(),t.readyToSendEmail?t._e():a("v-icon",{attrs:{color:"red",large:""}},[t._v("mdi-email-alert")])],1),t.readyToSendEmail?a("v-card-text",[t._v('"Are you ready to send email?"')]):t._e(),t.readyToSendEmail?t._e():a("v-card-text",[t._v("Looks like there are items that needs to be packed")]),t.readyToSendEmail?a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){e.stopPropagation(),t.dialog=!1}}},[t._v("No")]),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){t.sendEmailAll(),t.dialog=!1}}},[t._v("Yes")])],1):t._e()],1)],1)],1),a("v-col",{staticClass:"ma-0 pt-1 text-md-end hidden-sm-and-down",attrs:{cols:"1"}},[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({attrs:{dense:"",small:"",text:""}},s),[t.isPounds?t._e():a("v-icon",{staticClass:"pa-0",attrs:{large:""},on:{click:t.toggleGmsLbs}},[t._v("mdi-weight-kilogram")]),t.isPounds?a("v-icon",{attrs:{large:""},on:{click:t.toggleGmsLbs}},[t._v("mdi-weight-pound")]):t._e()],1)]}}])},[a("span",[t._v("lbs - kgs")])])],1)],1)],1)],1)],1)],1),a("v-card",{staticClass:"mx-auto ma-3",attrs:{"max-width":"1100",dense:""}},[a("v-expansion-panels",{attrs:{accordion:""}},t._l(t.localUsers,(function(e){return a("v-expansion-panel",{key:e.id},[a("v-expansion-panel-header",{attrs:{ripple:"",color:"#ECEFF1"},on:{click:function(a){return t.getUserPo(e.id)}}},[e.allPacked?a("div",{staticStyle:{color:"#1B5E20"}},[t._v(t._s(e.firstname)+" "+t._s(e.lastname)+" ("+t._s(e.itemCount)+")")]):t._e(),e.allPacked?t._e():a("div",{staticStyle:{color:"#DD2C00"}},[t._v(t._s(e.firstname)+" "+t._s(e.lastname)+" ("+t._s(e.itemCount)+")")])]),a("v-expansion-panel-content",[t.displayItems?a("v-form",{model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-card",{staticClass:"mx-auto mt-3",attrs:{"max-width":"1100",tile:"",dense:""}},[a("v-list-item",{attrs:{dense:""}},[a("v-list-item-content",{staticClass:"ma-0 pa-0",attrs:{dens:""}},[a("v-container",{staticClass:"ma-0 pa-0"},[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"ma-0 pa-0 align-centre hidden-sm-and-down",attrs:{cols:"4"}},[t._v("Item")]),a("v-col",{staticClass:"ma-0 pa-0 align-centre hidden-md-and-up",attrs:{cols:"9"}},[t._v("Item")]),a("v-col",{staticClass:"pl-5 text-md-center hidden-sm-and-down",attrs:{cols:"2"}},[t._v("Act Qty")]),a("v-col",{staticClass:"text-md-center hidden-sm-and-down",attrs:{cols:"1"}},[t._v("Verified")]),a("v-col",{staticClass:"text-sm-center hidden-md-and-up",attrs:{cols:"3"}},[t._v("Verified")]),a("v-col",{staticClass:"text-md-end hidden-sm-and-down",attrs:{cols:"2"}},[t._v("Unit Price")]),a("v-col",{staticClass:"pl-12 hidden-sm-and-down",staticStyle:{"text-align":"right"},attrs:{cols:"3"}},[t._v("Total")])],1)],1)],1)],1)],1),a("v-card",{staticClass:"mx-auto mt-0",attrs:{"max-width":"1100"}},[t._l(t.localUserPo,(function(e){return a("v-list-item",{key:e.id,attrs:{dense:""}},[a("v-list-item-content",{staticClass:"ma-0 pa-0",attrs:{dens:""}},[a("v-container",{staticClass:"ma-0 pa-0"},[a("v-row",{staticClass:"ma-0 pa-0"},[a("v-col",{staticClass:"mt-4 pb-0 hidden-sm-and-down",attrs:{cols:"4"}},[t._v(t._s(e.itemName))]),a("v-col",{staticClass:"mt-4 pb-0 hidden-md-and-up",attrs:{cols:"9"}},[t._v(t._s(e.itemName))]),a("v-col",{staticClass:"mt-4 pb-0 text-md-center hidden-sm-and-down",attrs:{cols:"2"}},[t._v(t._s(e.actQtyConv)+" "+t._s(e.defaultUnitsConv))]),a("v-col",{staticClass:"mt-2 pl-5 text-md-center hidden-sm-and-down",attrs:{cols:"1"}},[1===parseInt(e.isPacked)?a("v-icon",{attrs:{color:"green"},on:{click:function(a){return t.itemPacked(e)}}},[t._v("mdi-check")]):t._e(),0===parseInt(e.isPacked)?a("v-icon",{attrs:{color:"red"},on:{click:function(a){return t.itemPacked(e)}}},[t._v("mdi-close")]):t._e()],1),a("v-col",{staticClass:"mt-2 pl-5 text-md-center hidden-md-and-up",attrs:{cols:"3"}},[1===parseInt(e.isPacked)?a("v-icon",{attrs:{color:"green"},on:{click:function(a){return t.itemPacked(e)}}},[t._v("mdi-check")]):t._e(),0===parseInt(e.isPacked)?a("v-icon",{attrs:{color:"red"},on:{click:function(a){return t.itemPacked(e)}}},[t._v("mdi-close")]):t._e()],1),a("v-col",{staticClass:"mt-4 pb-0 text-md-right hidden-sm-and-down",attrs:{cols:"2"}},[t._v("$ "+t._s(parseFloat(e.actPrice).toFixed(2)))]),a("v-col",{staticClass:"mt-4 pb-0 text-md-right hidden-sm-and-down",attrs:{cols:"3"}},[t._v("$ "+t._s(e.totalPrice))])],1)],1),a("v-divider")],1)],1)})),a("v-list-item",{attrs:{dense:""}},[a("v-list-item-content",{staticClass:"mb-2 pa-0",attrs:{dens:""}},[a("v-container",{staticClass:"ma-0 pa-0"},[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"mb-0 pb-0",attrs:{cols:"9"}}),a("v-col",{staticClass:"mt-4 pr-3 text-md-right hidden-sm-and-down",staticStyle:{"font-weight":"bold"},attrs:{cols:"3"}},[t._v("$ "+t._s(t.grandTotal))])],1)],1)],1)],1)],2)],1):t._e()],1)],1)})),1)],1),a("v-card",{staticClass:"mx-auto ma-3 text-md-end",attrs:{"max-width":"1100",light:"",dense:""}}),a("v-snackbar",{attrs:{"multi-line":t.multiLine},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(this.message)+" "),a("v-btn",{attrs:{color:"red",text:""},on:{click:function(e){t.snackbar=!1}}},[t._v("Close")])],1)],1)},Oe=[],we={name:"AllUserOders",data(){return{localUsers:[],localUserPo:[],valid:!1,snackbar:!1,message:null,multiLine:!0,tempPO:{id:0,orderId:0,itemId:0,userId:0,qty:0,actQty:0,actPrice:0,isCancelled:0},dialog:!1,emailDialogText:"",emailDialogTextColor:"",localAllPacked:!1,localNonePacked:!1,actPriceList:[],displayItems:!1,readyToSendEmail:!0}},async created(){},async mounted(){await this.getPurchaseOrderByOrderIdAction(this.getCurrentOrder.id),await this.getBulkOrderByOrderIdAction(this.getCurrentOrder.id),await this.getUsers(),this.actPriceList=this.getActualPrice},methods:{...Object(d["b"])(["getOrdersAction","getItemsAction","getPurchaseOrderByOrderIdAction","getBulkOrderByOrderIdAction","updatePurchaseOrderAction"]),snackMessage:function(t){this.message=t,this.snackbar=!0},toggleGmsLbs(){this.isPounds=!this.isPounds,this.localUserPo.forEach(t=>{t.qtyConv=this.convertGmsToLbs(t.qtyConv,t.defaultUnitsConv),t.suggestedQtyConv=this.convertGmsToLbs(t.suggestedQtyConv,t.defaultUnitsConv),t.actQtyConv=this.convertGmsToLbs(t.actQtyConv,t.defaultUnitsConv),t.defaultUnitsConv=this.getDefaultUnits(t.defaultUnitsConv)})},convertGmsToLbs(t,e){return"kgs"!==e&&"lbs"!==e?t:this.isPounds&&"lbs"===e?t||null:this.isPounds&&"kgs"===e?t?(2.20462*t).toFixed(2):null:this.isPounds||"kgs"!==e?this.isPounds||"lbs"!==e?void 0:t?(.453592*parseFloat(t)).toFixed(2):null:t||null},calcPrice:function(t){"lbs"===t.defaultUnits&&"kgs"===t.defaultUnitsConv?t.actQty=2.20462*t.actQtyConv:"kgs"===t.defaultUnits&&"lbs"===t.defaultUnitsConv?t.actQty=.453592*t.actQtyConv:t.actQty=t.actQtyConv},getDefaultUnits(t){return"kgs"!==t&&"lbs"!==t?t:this.isPounds?"lbs":"kgs"},setReadyToSendEmailFlag(){this.readyToSendEmail=!0;let t=this.purchaseOrders.filter(t=>0===parseInt(t.isPacked)&&0===parseInt(t.isCancelled)),e=this.bulkOrders.filter(t=>0===parseInt(t.isCancelled)&&t.actQty>0);0===e.length&&(this.readyToSendEmail=!1),t.forEach(t=>{this.readyToSendEmail&&e.find(e=>parseInt(e.itemId)===parseInt(t.itemId))&&(this.readyToSendEmail=!1)})},async getUsers(){await xt.getAllUsers().then(t=>{t&&t.length>0&&t.forEach(t=>{let e=this.purchaseOrders.find(e=>e.userId===t.id&&0===parseInt(e.isCancelled)&&parseInt(e.suggestedQty)>0);e&&this.localUsers.push(t)})});let t=await this.bulkOrders.filter(t=>0===parseInt(t.isCancelled)&&parseFloat(t.actQty)>0);await this.localUsers.forEach(e=>{let a=this.purchaseOrders.filter(t=>parseInt(t.userId)===parseInt(e.id)&&0===parseInt(t.isPacked)&&0===parseInt(t.isCancelled));e["allPacked"]=!0,a.forEach(t=>{this.bulkOrders.find(e=>parseInt(e.itemId)===parseInt(t.itemId)&&parseFloat(e.actQty)>0)&&(e["allPacked"]&&(e["allPacked"]=!1),this.readyToSendEmail&&(this.readyToSendEmail=!1))}),e["itemCount"]=this.purchaseOrders.filter(a=>parseInt(a.userId)===parseInt(e.id)&&0===parseInt(a.isCancelled)&&t.find(t=>parseInt(t.itemId)===parseInt(a.itemId))).length}),this.localUsers.sort((function(t,e){return t.firstname<e.firstname?-1:t.firstname>e.firstname?1:0}))},calcItemPrice:function(t){this.calcPrice(t),t.totalPrice=(parseFloat(t.actPrice)*parseFloat(t.actQty)).toFixed(2)},getEmailText(t,e){this.localAllPacked=t,this.localNonePacked=e,t?(this.emailDialogTextColor="green",this.emailDialogText="Are you ready to send the email?"):(this.emailDialogTextColor="red",this.emailDialogText="Looks like the order is not completely packed, please pack the items before you can send the email")},sendEmailAll(){this.readyToSendEmail?this.localUsers.forEach(t=>this.sendEmail(t.id)):this.snackMessage("Please make sure all the items have been packed")},sendEmail(t){let e=this.purchaseOrders.find(e=>1===parseInt(e.isPacked)&&parseInt(e.userId)===parseInt(t));e?xt.sendEmailPurchaseOrder({userId:t,orderId:e.orderId},this.user.id).then(()=>{this.snackMessage("Email sent successfully!")}).catch(t=>{console.log(t),this.snackMessage("Failed to send Email.")}):this.snackMessage("No items packed yet!")},savePo(){this.localUserPo.forEach(t=>{this.tempPO={id:t.id,orderId:t.orderId,itemId:t.itemId,userId:t.userId,qty:t.qty,actQty:parseFloat(t.actQty),suggestedQty:parseFloat(t.suggestedQty),actPrice:parseFloat(t.actPrice),isCancelled:t.isCancelled,isPacked:t.isPacked},this.updatePurchaseOrderAction(this.tempPO)}),this.snackMessage("Updated Data!")},getActPrice(t){let e=this.actPriceList.find(e=>e.itemId===t.id);return e||{itemId:0,price:0}},setPackedFlags(t,e){let a=t.find(t=>0===parseInt(t.isPacked)),s=t.find(t=>1===parseInt(t.isPacked)),i=this.localUsers.find(t=>parseInt(t.id)===parseInt(e));i&&(i.allPacked=!a,i.nonePacked=!s,this.setReadyToSendEmailFlag())},async itemPacked(t){let e=!!this.bulkOrders.find(e=>e.itemId===t.itemId&&0===parseFloat(e.actPriceFinal));if(e||(t.allPacked="true"),e)this.snackMessage("Please go back to Pack Items page & enter Actual Quantity for all buyers of this item to calculate the Unit Price, before setting 'packed'");else if(t.actQty&&t.actQty>0){let e=1===parseInt(t.isPacked)?0:1;t.isPacked=e,await this.updatePurchaseOrderAction(t),await this.setPackedFlags(this.localUserPo,t.userId)}else this.snackMessage("Please enter Actual Quantity before selecting 'packed'")},getUserPo(t){this.localUserPo=[];let e=this.purchaseOrders.filter(e=>parseInt(e.userId)===parseInt(t)&&0===parseInt(e.isCancelled));e.forEach(t=>{let e=this.getActiveItems.find(e=>e.id===t.itemId);if(e){let a=this.getActPrice(e),s=a.itemId>0?a.price:0,i=this.bulkOrders.find(t=>t.itemId===e.id&&parseInt(t.actQty)>0&&parseFloat(t.actPrice)>0);i&&(this.displayItems=!0,this.localUserPo.push({id:t.id,orderId:t.orderId,itemId:t.itemId,userId:t.userId,qty:t.qty,qtyConv:this.convertGmsToLbs(t.qty,e.defaultUnits),actQty:t.actQty>0?t.actQty:null,actQtyConv:this.convertGmsToLbs(t.actQty,e.defaultUnits),suggestedQty:t.suggestedQty,suggestedQtyConv:this.convertGmsToLbs(t.suggestedQty,e.defaultUnits),actPrice:s,isCancelled:t.isCancelled,isPacked:t.isPacked,itemName:e.name,defaultUnits:e.defaultUnits,defaultUnitsConv:this.getDefaultUnits(e.defaultUnits),totalPrice:((s?parseFloat(s):0)*(t.actQty?parseFloat(t.actQty):0)).toFixed(2)}))}}),this.localUserPo.sort((function(t,e){return t.itemName<e.itemName?-1:t.itemName>e.itemName?1:0})),this.setPackedFlags(this.localUserPo,t)}},computed:{...Object(d["d"])(["purchaseOrders","items","user","bulkOrders"]),...Object(d["c"])(["getCurrentOrder","getActiveItems","getActualPrice"]),grandTotal:function(){var t=0;return this.localUserPo.forEach(e=>{e&&1===parseInt(e.isPacked)&&(t+=parseFloat(e.totalPrice))}),t.toFixed(2)},isPounds:{get(){return this.$store.state.isPounds},set(t){this.$store.commit("togglePounds",t)}}}},Pe=we,Ae=(a("1b00"),a("169a")),Qe=Object(p["a"])(Pe,_e,Oe,!1,null,"27e37f81",null),Ue=Qe.exports;h()(Qe,{VBtn:O["a"],VCard:w["a"],VCardActions:P["a"],VCardText:P["b"],VCardTitle:P["c"],VCol:Nt["a"],VContainer:jt["a"],VDialog:Ae["a"],VDivider:A["a"],VExpansionPanel:ye["a"],VExpansionPanelContent:be["a"],VExpansionPanelHeader:ke["a"],VExpansionPanels:Ce["a"],VForm:Q["a"],VIcon:D["a"],VListItem:zt["a"],VListItemContent:Gt["a"],VRow:Kt["a"],VSnackbar:U["a"],VSpacer:F["a"],VTooltip:Jt["a"]});var Fe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.pageLoaded?a("div",[a("v-card",{staticClass:"mx-auto mt-5",attrs:{"max-width":"1100",color:"orange",rounded:""}},[a("v-list-item",{attrs:{dense:""}},[a("v-list-item-content",{staticClass:"ma-0 pa-0",attrs:{dens:""}},[a("v-container",{staticClass:"ma-0 pa-0"},[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"pt-2 text-md-center",attrs:{cols:"11"}},[t._v(" Reconcile Order ")]),a("v-col",{staticClass:"text-md-center",attrs:{cols:"1"}},[a("v-btn",{attrs:{text:""},on:{click:t.generatePdf}},[a("v-icon",{staticClass:"hidden-md-and-up pr-4",attrs:{small:"",left:""}},[t._v("mdi-file-pdf")]),a("span",{staticClass:"hidden-sm-and-down pl-8",attrs:{right:""}},[t._v("pdf")])],1)],1)],1)],1)],1)],1)],1),a("v-card",{staticClass:"mx-auto mt-3",attrs:{"max-width":"1100",color:"#B0BEC5"}},[a("v-list-item",[a("v-list-item-content",{staticClass:"ma-0 pa-0",attrs:{dens:""}},[a("v-container",{staticClass:"ma-0 pa-0 hidden-md-and-up"},[a("v-row",[a("v-col",{staticClass:"text-md-center pl-5",staticStyle:{background:"#8D6E63",color:"white"},attrs:{cols:"6"}},[t._v("Bulkorder Invoice")]),a("v-col",{staticClass:"text-md-center",staticStyle:{background:"#4DB6AC",color:"white"},attrs:{cols:"6"}},[t._v("Packed Order")])],1),a("v-divider"),a("v-row",[a("v-col",{staticClass:"text-md-center pl-4",staticStyle:{background:"#BCAAA4",color:"white","font-size":"12px"},attrs:{cols:"2"}},[t._v("Qty")]),a("v-col",{staticClass:"hidden-sm-and-down",staticStyle:{background:"#BCAAA4",color:"white","font-size":"12px"},attrs:{cols:"1"}},[t._v("Unit Price")]),a("v-col",{staticStyle:{background:"#BCAAA4",color:"white","font-size":"12px"},attrs:{cols:"2"}},[t._v("Unit ($)")]),a("v-col",{staticStyle:{background:"#BCAAA4",color:"white","font-size":"12px"},attrs:{cols:"2"}},[t._v("Total ($)")]),a("v-col",{staticClass:"text-md-center",staticStyle:{background:"#B2DFDB",color:"white","font-size":"12px"},attrs:{cols:"2"}},[t._v("Qty")]),a("v-col",{staticClass:"hidden-sm-and-down",staticStyle:{background:"#B2DFDB",color:"white","font-size":"12px"},attrs:{cols:"1"}},[t._v("Unit Price")]),a("v-col",{staticStyle:{background:"#B2DFDB",color:"white","font-size":"12px"},attrs:{cols:"2"}},[t._v("Unit ($)")]),a("v-col",{staticClass:"hidden-sm-and-down",staticStyle:{background:"#B2DFDB",color:"white","font-size":"12px"},attrs:{cols:"1"}},[t._v("Total")]),a("v-col",{staticStyle:{background:"#B2DFDB",color:"white","font-size":"12px"},attrs:{cols:"2"}},[t._v("Total ($)")])],1)],1),a("v-container",{staticClass:"ma-0 pa-0 hidden-sm-and-down"},[a("v-row",[a("v-col",{staticStyle:{background:"#78909C",color:"white"},attrs:{cols:"4"}}),a("v-col",{staticClass:"text-md-center",staticStyle:{background:"#8D6E63",color:"white"},attrs:{cols:"4"}},[t._v("Bulkorder Invoice")]),a("v-col",{staticClass:"text-md-center",staticStyle:{background:"#4DB6AC",color:"white"},attrs:{cols:"4"}},[t._v("Packed Order")])],1),a("v-divider"),a("v-row",[a("v-col",{staticClass:"text-md-center",staticStyle:{background:"#B0BEC5",color:"white"},attrs:{cols:"4"}},[t._v("Items")]),a("v-col",{staticClass:"text-md-center",staticStyle:{background:"#BCAAA4",color:"white"},attrs:{cols:"2"}},[t._v("Qty")]),a("v-col",{staticClass:"hidden-sm-and-down",staticStyle:{background:"#BCAAA4",color:"white"},attrs:{cols:"1"}},[t._v("Unit Price ($)")]),a("v-col",{staticClass:"hidden-md-and-up",staticStyle:{background:"#BCAAA4",color:"white"},attrs:{cols:"1"}},[t._v("$")]),a("v-col",{staticClass:"hidden-sm-and-down",staticStyle:{background:"#BCAAA4",color:"white"},attrs:{cols:"1"}},[t._v("Total ($)")]),a("v-col",{staticClass:"hidden-md-and-up",staticStyle:{background:"#BCAAA4",color:"white"},attrs:{cols:"1"}},[t._v("$")]),a("v-col",{staticClass:"text-md-center",staticStyle:{background:"#B2DFDB",color:"white"},attrs:{cols:"2"}},[t._v("Qty")]),a("v-col",{staticClass:"hidden-sm-and-down",staticStyle:{background:"#B2DFDB",color:"white"},attrs:{cols:"1"}},[t._v("Unit Price ($)")]),a("v-col",{staticClass:"hidden-md-and-up",staticStyle:{background:"#B2DFDB",color:"white"},attrs:{cols:"1"}},[t._v("$")]),a("v-col",{staticClass:"hidden-sm-and-down",staticStyle:{background:"#B2DFDB",color:"white"},attrs:{cols:"1"}},[t._v("Total ($)")]),a("v-col",{staticClass:"hidden-md-and-up",staticStyle:{background:"#B2DFDB",color:"white"},attrs:{cols:"1"}},[t._v("$")])],1)],1)],1)],1)],1),a("v-card",{staticClass:"mx-auto mt-1 hidden-md-and-up",attrs:{"max-width":"1100",id:"pdfDoc"}},[t._l(t.reportData,(function(e){return a("v-list-item",{key:e.itemId,attrs:{dense:""}},[a("v-list-item-content",{staticClass:"ma-0 pa-0",attrs:{dens:""}},[a("v-container",{staticClass:"ma-0 pa-0"},[a("v-row",{staticClass:"ma-0 pa-0"},[a("v-col",{staticClass:"ma-0 pt-4",staticStyle:{"font-size":"15px","text-align":"left"},attrs:{cols:"12"}},[t._v(" "+t._s(e.itemName)+" ("+t._s(e.defaultUnits)+" ")])],1),a("v-row",[a("v-col",{staticClass:"text-md-right",staticStyle:{"font-size":"12px"},attrs:{cols:"2"}},[t._v(t._s(e.boQty))]),a("v-col",{staticClass:"mb-0 pb-0 text-md-right",staticStyle:{"font-size":"12px"},attrs:{cols:"2"}},[t._v(t._s(parseFloat(e.unitPrice).toFixed(2)))]),a("v-col",{staticClass:"mb-0 pb-0 text-md-right",staticStyle:{"font-size":"12px"},attrs:{cols:"2"}},[t._v(t._s(e.boTotal))]),a("v-col",{staticClass:"mb-0 pb-0 text-md-right",staticStyle:{"font-size":"12px"},attrs:{cols:"2"}},["green"===e.pQtyColor?a("div",{staticStyle:{color:"green"}},[t._v(t._s(e.pQty))]):t._e(),"black"===e.pQtyColor?a("div",{staticStyle:{color:"black"}},[t._v(t._s(e.pQty))]):t._e(),"red"===e.pQtyColor?a("div",{staticStyle:{color:"red"}},[t._v(t._s(e.pQty))]):t._e()]),a("v-col",{staticClass:"mb-0 pb-0 text-md-right",staticStyle:{"font-size":"12px"},attrs:{cols:"2"}},[t._v(t._s(parseFloat(e.unitPriceFinal).toFixed(2)))]),a("v-col",{staticClass:"mb-0 pb-0 text-md-right",staticStyle:{"font-size":"12px"},attrs:{cols:"2"}},["red"===e.starColor?a("div",{staticStyle:{color:"red"}},[t._v(t._s(e.pTotal))]):t._e(),"green"===e.starColor?a("div",{staticStyle:{color:"green"}},[t._v(t._s(e.pTotal))]):t._e(),"white"===e.starColor?a("div",{staticStyle:{color:"black"}},[t._v(t._s(e.pTotal))]):t._e()])],1)],1),a("v-divider")],1)],1)})),a("v-list-item",{staticClass:"hidden-md-and-up"},[a("v-list-item-content",{staticClass:"ma-0 pa-0"},[a("v-container",{staticClass:"ma-0 pa-0"},[a("v-row",[a("v-col",{staticClass:"mb-0 pb-0",staticStyle:{"font-weight":"bold","font-size":"12px"},attrs:{cols:"4"}},[t._v("Total")]),a("v-col",{staticClass:"mb-0 pb-0 float-right",staticStyle:{"font-weight":"bold","font-size":"11px"},attrs:{cols:"2"}},[t._v(t._s(parseFloat(t.boGrTotal).toFixed(2)))]),a("v-col",{staticClass:"mb-0 pb-0",attrs:{cols:"4"}}),parseFloat(t.boGrTotal)<parseFloat(t.pGrTotal)?a("v-col",{staticClass:"mb-0 pb-3",staticStyle:{"font-weight":"bold","font-size":"11px",color:"green"},attrs:{cols:"2"}},[t._v(t._s(parseFloat(t.pGrTotal).toFixed(2)))]):t._e(),parseFloat(t.boGrTotal)===parseFloat(t.pGrTotal)?a("v-col",{staticClass:"mb-0 pb-3",staticStyle:{"font-weight":"bold","font-size":"11px",color:"black"},attrs:{cols:"2"}},[t._v(t._s(parseFloat(t.pGrTotal).toFixed(2)))]):t._e(),parseFloat(t.boGrTotal)>parseFloat(t.pGrTotal)?a("v-col",{staticClass:"mb-0 pb-3",staticStyle:{"font-weight":"bold","font-size":"11px",color:"red"},attrs:{cols:"2"}},[t._v(t._s(parseFloat(t.pGrTotal).toFixed(2)))]):t._e()],1),a("v-divider")],1)],1)],1)],2),a("v-card",{staticClass:"mx-auto mt-1 hidden-sm-and-down",attrs:{"max-width":"1100"}},[t._l(t.reportData,(function(e){return a("v-list-item",{key:e.itemId,attrs:{dense:""}},[a("v-list-item-content",{staticClass:"ma-0 pa-0",attrs:{dens:""}},[a("v-container",{staticClass:"ma-0 pa-0"},[a("v-row",{staticClass:"ma-0 pa-0"},[a("v-col",{staticClass:"mt-3",attrs:{cols:"4"}},[t._v(" "+t._s(e.itemName)+" ")]),a("v-col",{staticClass:"text-md-right",attrs:{cols:"2"}},[t._v(t._s(e.boQty)+" "+t._s(e.defaultUnits))]),a("v-col",{staticClass:"mb-0 pb-0 text-md-right",attrs:{cols:"1"}},[t._v(t._s(parseFloat(e.unitPrice).toFixed(2)))]),a("v-col",{staticClass:"mb-0 pb-0 text-md-right",attrs:{cols:"1"}},[t._v(t._s(e.boTotal))]),a("v-col",{staticClass:"mb-0 pb-0 text-md-right",attrs:{cols:"2"}},["green"===e.pQtyColor?a("div",{staticStyle:{color:"green"}},[t._v(t._s(e.pQty)+" "+t._s(e.defaultUnits))]):t._e(),"black"===e.pQtyColor?a("div",{staticStyle:{color:"black"}},[t._v(t._s(e.pQty)+" "+t._s(e.defaultUnits))]):t._e(),"red"===e.pQtyColor?a("div",{staticStyle:{color:"red"}},[t._v(t._s(e.pQty)+" "+t._s(e.defaultUnits))]):t._e()]),a("v-col",{staticClass:"mb-0 pb-0 text-md-right",attrs:{cols:"1"}},[t._v(t._s(parseFloat(e.unitPriceFinal).toFixed(2)))]),a("v-col",{staticClass:"mb-0 pb-0 text-md-right",attrs:{cols:"1"}},["red"===e.starColor?a("div",{staticStyle:{color:"red"}},[t._v(t._s(e.pTotal))]):t._e(),"green"===e.starColor?a("div",{staticStyle:{color:"green"}},[t._v(t._s(e.pTotal))]):t._e(),"white"===e.starColor?a("div",{staticStyle:{color:"black"}},[t._v(t._s(e.pTotal))]):t._e()])],1)],1),a("v-divider")],1)],1)})),a("v-divider"),a("v-list-item",{attrs:{dense:""}},[a("v-list-item-content",{staticClass:"ma-0 pa-0",attrs:{dens:""}},[a("v-container",{staticClass:"ma-0 pa-0"},[a("v-row",[a("v-col",{staticClass:"mb-0 pb-0",attrs:{cols:"7"}}),a("v-col",{staticClass:"mb-0 pb-0 float-right",staticStyle:{"font-weight":"bold"},attrs:{cols:"2"}},[t._v("$ "+t._s(parseFloat(t.boGrTotal).toFixed(2)))]),a("v-col",{staticClass:"mb-0 pb-0 float-right",attrs:{cols:"2"}}),parseFloat(t.boGrTotal)<parseFloat(t.pGrTotal)?a("v-col",{staticClass:"mb-0 pb-3",staticStyle:{"font-weight":"bold",color:"green"},attrs:{cols:"1"}},[t._v("$"+t._s(parseFloat(t.pGrTotal).toFixed(2)))]):t._e(),parseFloat(t.boGrTotal)>parseFloat(t.pGrTotal)?a("v-col",{staticClass:"mb-0 pb-3",staticStyle:{"font-weight":"bold",color:"red"},attrs:{cols:"1"}},[t._v("$"+t._s(parseFloat(t.pGrTotal).toFixed(2)))]):t._e(),parseFloat(t.boGrTotal)===parseFloat(t.pGrTotal)?a("v-col",{staticClass:"mb-0 pb-3",staticStyle:{"font-weight":"bold",color:"black"},attrs:{cols:"1"}},[t._v("$"+t._s(parseFloat(t.pGrTotal).toFixed(2)))]):t._e(),a("v-col",{staticClass:"mb-0 pb-0",attrs:{cols:"2"}})],1)],1)],1)],1),a("v-divider")],2),a("v-snackbar",{attrs:{"multi-line":t.multiLine},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(this.message)+" "),a("v-btn",{attrs:{color:"red",text:""},on:{click:function(e){t.snackbar=!1}}},[t._v("Close")])],1)],1):t._e()},Se=[],Ve={name:"OrderRecon",data(){return{valid:!1,localItems:[],itemQty:[],snackbar:!1,message:null,multiLine:!0,tempBO:{id:0,orderId:0,itemId:0,actQty:0,actPrice:0,isCancelled:0},reportRow:{id:0,boQty:0,boTotal:0,pQty:0,pTotal:0,unitPrice:0},reportData:[],pGrTotal:0,boGrTotal:0,pageLoaded:!1,pdfColumns:[],pdfRows:[]}},created(){this.getQtyByItem()},mounted(){this.getData()},methods:{...Object(d["b"])(["getItemsAction","getOrdersAction","getOrderStatusAction","getPurchaseOrderByOrderIdAction","getBulkOrderByOrderIdAction"]),generatePdf(){var t=new ce("p","pt","4A0");t.setProperties({title:"Vegetable Buying Club Recon - Order No: "+this.getCurrentOrder.id,subject:"Order Reconciliation",author:"Vegetable Buying Club",keywords:"generated, javascript, web 2.0, ajax",creator:"MEEE"}),t.setFont("PTSans"),t.setFontSize(10),t.setFontStyle("italic"),t.text("Vegetable Buying Club Reconciliation - Order No: "+this.getCurrentOrder.id,200,15),t.autoTable({headStyles:{valign:"middle",halign:"center"},columnStyles:{boTotal:{halign:"right"},unitPrice:{halign:"right"},pTotal:{halign:"right"},unitPriceFinal:{halign:"right"},boQty:{halign:"center"},pQty:{halign:"center"}},styles:{fontSize:8,cellWidth:"auto",font:"helvetica"},theme:"striped",body:this.pdfRows,columns:this.pdfColumns}),t.save(`OrderSummary_${this.getCurrentOrder.id}.pdf`)},getQtyByItem(){this.itemQty=[],this.purchaseOrders.forEach(t=>{if(0===parseFloat(t.isCancelled))if(0!==this.itemQty.length&&this.itemQty.find(e=>e.itemId===t.itemId)){let e=this.itemQty.find(e=>e.itemId===t.itemId);e.qty=parseFloat(e.qty)+parseFloat(t.qty)}else this.itemQty.push({itemId:t.itemId,qty:parseFloat(t.qty)})})},async getData(){await this.getOrderStatusAction(),await this.getOrdersAction(),await this.getPurchaseOrderByOrderIdAction(this.getCurrentOrder.id),await this.getBulkOrderByOrderIdAction(this.getCurrentOrder.id),this.bulkOrders.forEach(t=>{let e=this.itemQty.find(e=>e.itemId===t.itemId);if(e&&t.actQty>0){let e=this.purchaseOrders.filter(e=>e.itemId===t.itemId&&0===parseInt(e.isCancelled)),a=0,s=0;e.forEach(e=>{a+=t.actPriceFinal*e.actQty,s+=e.actQty?parseFloat(e.actQty):0}),this.pGrTotal+=a,this.boGrTotal+=t.totalPrice?parseFloat(t.totalPrice):0;let i=this.items.find(e=>e.id===t.itemId);this.reportData.push({itemName:i.name,itemId:t.itemId,defaultUnits:i.defaultUnits,boQty:t.actQty,boTotal:t.totalPrice,pQty:s.toFixed(2),pQtyColor:s>t.actQty?"green":parseInt(s)===parseInt(t.actQty)?"black":"red",pTotal:a.toFixed(2),unitPrice:t.actPrice?t.actPrice.toString():0,unitPriceFinal:t.actPriceFinal?t.actPriceFinal.toString():0,starColor:parseFloat(t.totalPrice).toFixed(2)===parseFloat(a).toFixed(2)?"white":parseFloat(a)-parseFloat(t.totalPrice)>0?"green":"red"})}}),this.pdfColumns.push({title:"Item",dataKey:"itemName"},{title:"Bulk Order Qty",dataKey:"boQty"},{title:"Bulk Unit Price",dataKey:"unitPrice"},{title:"Bulk Total",dataKey:"boTotal"},{title:"Packed Order Qty",dataKey:"pQty"},{title:"Packed Unit Price",dataKey:"unitPriceFinal"},{title:"Packed Total",dataKey:"pTotal"}),this.reportData.sort((function(t,e){return t.itemName<e.itemName?-1:t.itemName>e.itemName?1:0})),this.pageLoaded="true",this.reportData.forEach(t=>{this.pdfRows.push({itemName:t.itemName,boQty:`${t.boQty} ${t.defaultUnits}`,pQty:`${t.pQty} ${t.defaultUnits}`,unitPrice:"$ "+parseFloat(t.unitPrice).toFixed(2),unitPriceFinal:"$ "+parseFloat(t.unitPriceFinal).toFixed(2),boTotal:"$ "+parseFloat(t.boTotal).toFixed(2),pTotal:"$ "+parseFloat(t.pTotal).toFixed(2)})});let t={itemName:"Total",boQty:"",pQty:"",unitPrice:"",unitPriceFinal:"",boTotal:"$ "+parseFloat(this.boGrTotal).toFixed(2),pTotal:"$ "+parseFloat(this.pGrTotal).toFixed(2)};return this.pdfRows.push(t),this.reportData}},computed:{...Object(d["d"])(["bulkOrders","purchaseOrders","items"]),...Object(d["c"])(["getCurrentOrder"]),grandTotal:function(){return 0}}},Te=Ve,$e=Object(p["a"])(Te,Fe,Se,!1,null,null,null),Ee=$e.exports;h()($e,{VBtn:O["a"],VCard:w["a"],VCol:Nt["a"],VContainer:jt["a"],VDivider:A["a"],VIcon:D["a"],VListItem:zt["a"],VListItemContent:Gt["a"],VRow:Kt["a"],VSnackbar:U["a"]});var Be=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",{staticClass:"mx-auto mt-5",attrs:{"max-width":"1100",color:"orange",rounded:""}},[a("v-list-item",{attrs:{dense:""}},[a("v-list-item-content",{staticClass:"ma-0 pa-0",attrs:{dens:""}},[a("v-container",{staticClass:"ma-0 pa-0"},[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"ma-0 pt-2 text-md-center hidden-sm-and-down",attrs:{cols:"11"}},[t._v("Pack Order")]),a("v-col",{staticClass:"ma-0 pt-2 text-md-center hidden-md-and-up",attrs:{cols:"10"}},[t._v("Pack Order")]),a("v-col",{staticClass:"ma-0 pa-0 text-md-start hidden-sm-and-down",attrs:{cols:"1"}},[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({attrs:{dense:"",small:"",text:""}},s),[t.isPounds?t._e():a("v-icon",{attrs:{large:""},on:{click:t.toggleGmsLbs}},[t._v("mdi-weight-kilogram")]),t.isPounds?a("v-icon",{attrs:{large:""},on:{click:t.toggleGmsLbs}},[t._v("mdi-weight-pound")]):t._e()],1)]}}])},[a("span",[t._v("lbs - kgs")])])],1),a("v-col",{staticClass:"ma-0 pa-0 text-md-start hidden-md-and-up",attrs:{cols:"2"}},[a("v-btn",{attrs:{dense:"",small:"",text:""}},[t.isPounds?t._e():a("v-icon",{on:{click:t.toggleGmsLbs}},[t._v("mdi-weight-kilogram")]),t.isPounds?a("v-icon",{on:{click:t.toggleGmsLbs}},[t._v("mdi-weight-pound")]):t._e()],1)],1)],1)],1)],1)],1)],1),a("v-card",{staticClass:"mx-auto ma-3",attrs:{"max-width":"1100",tile:"",dense:"",shaped:""}},[a("v-expansion-panels",{attrs:{accordion:""}},t._l(t.ordItems,(function(e){return a("v-expansion-panel",{key:e.itemId},[a("v-expansion-panel-header",{attrs:{ripple:"",color:"#ECEFF1"},on:{click:function(a){return t.getItemPo(e)}}},[parseFloat(e.actPriceFinal)>0?a("div",{staticStyle:{color:"#1B5E20"}},[t._v(t._s(e.itemName)+" ("+t._s(e.userCount)+")")]):t._e(),0===parseFloat(e.actPriceFinal)?a("div",{staticStyle:{color:"red"}},[t._v(t._s(e.itemName)+" ("+t._s(e.userCount)+")")]):t._e()]),a("v-expansion-panel-content",[a("v-form",{model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-card",{staticClass:"ma-auto mt-3",attrs:{"max-width":"1000",dense:"",color:"grey lighten-4"}},[a("v-list-item",{attrs:{dense:""}},[a("v-list-item-content",{staticClass:"ma-0 pa-0",attrs:{dens:""}},[a("v-container",{staticClass:"ma-0 pa-0"},[a("v-row",[a("v-col",{staticClass:"text-md-center hidden-sm-and-down",attrs:{cols:"12"}},[t._v("Total Quantity Ordered - "),a("span",{staticStyle:{"font-weight":"bold",color:"#33691E"}},[t._v(t._s(t.convertGmsToLbs(e.actQty,e.defaultUnits))+" "+t._s(t.getDefaultUnits(e.defaultUnits)))])]),a("v-col",{staticClass:"text-sm-center hidden-md-and-up",staticStyle:{"font-size":"12px"},attrs:{cols:"12"}},[t._v("Total Quantity Ordered - "),a("span",{staticStyle:{"font-weight":"bold",color:"#33691E"}},[t._v(t._s(t.convertGmsToLbs(e.actQty,e.defaultUnits))+" "+t._s(t.getDefaultUnits(e.defaultUnits)))])])],1)],1)],1)],1)],1),a("v-card",{staticClass:"mx-auto mt-1",attrs:{"max-width":"1000",dense:""}},[a("v-list-item",{attrs:{dense:""}},[a("v-list-item-content",{staticClass:"ma-0 pa-0",attrs:{dens:""}},[a("v-container",{staticClass:"ma-0 pa-0"},[a("v-row",[a("v-col",{attrs:{cols:"6",justify:"centre"}}),a("v-col",{staticClass:"hidden-sm-and-down",attrs:{cols:"2"}},[t._v("Ordered Qty")]),a("v-col",{staticClass:"hidden-sm-and-down",attrs:{cols:"2"}},[t._v("Approximate Qty")]),a("v-col",{staticClass:"hidden-md-and-up",staticStyle:{"font-size":"12px"},attrs:{cols:"3"}},[t._v("Approx. Qty ("+t._s(t.getDefaultUnits(e.defaultUnits))+")")]),a("v-col",{staticClass:"hidden-sm-and-down",attrs:{cols:"2"}},[t._v("Actual Qty")]),a("v-col",{staticClass:"hidden-md-and-up",staticStyle:{"font-size":"12px"},attrs:{cols:"3"}},[t._v("Actual ("+t._s(t.getDefaultUnits(e.defaultUnits))+")")])],1)],1)],1)],1)],1),a("v-card",{staticClass:"mx-auto mt-1",attrs:{"max-width":"1000",dense:""}},[t._l(t.localItemPo,(function(s){return a("v-list-item",{key:s.id,attrs:{dense:""}},[a("v-list-item-content",{staticClass:"ma-0 pa-0",attrs:{dens:""}},[a("v-container",{staticClass:"ma-0 pa-0"},[a("v-row",{staticClass:"ma-0 pa-0"},[a("v-col",{staticClass:"mt-6 pb-0",attrs:{cols:"6"}},[t._v(t._s(s.buyer))]),a("v-col",{staticClass:"mt-4 pb-0 text-md-center hidden-sm-and-down",attrs:{cols:"2"}},[t._v(t._s(s.qtyConv)+" "+t._s(s.defaultUnitsConv))]),a("v-col",{staticClass:"mt-4 pb-0 text-md-center hidden-sm-and-down",attrs:{cols:"2"}},[t._v(t._s(s.suggestedQtyConv)+" "+t._s(s.defaultUnitsConv))]),a("v-col",{staticClass:"mt-6 pb-0 text-md-center hidden-md-and-up",staticStyle:{"font-size":"14px"},attrs:{cols:"3"}},[t._v(t._s(s.suggestedQtyConv))]),a("v-col",{staticClass:"mb-2 pb-0 hidden-sm-and-down",attrs:{cols:"2"}},[a("v-flex",{staticClass:"text-xl-left",attrs:{shrink:""}},[a("v-text-field",{staticClass:"ma-0 pa-0 text-xl-left",attrs:{label:t.getDefaultUnits(s.defaultUnitsConv),"hide-details":"auto",value:parseFloat(s.actQtyConv).toFixed(2),color:"success",dense:"",outlined:"",rules:t.qtyRules,onclick:"this.select();"},on:{change:function(a){return t.calcItemPrice(s,e)}},model:{value:s.actQtyConv,callback:function(e){t.$set(s,"actQtyConv",e)},expression:"itempo.actQtyConv"}})],1)],1),a("v-col",{staticClass:"mb-0 pb-0 hidden-md-and-up",attrs:{cols:"3"}},[a("v-text-field",{staticClass:"mt-4 pa-0 centered-input",staticStyle:{"font-size":"14px",border:"1px solid","border-radius":"3px",display:"block","text-decoration":"none","text-align":"center !default"},attrs:{"hide-details":"auto",value:parseFloat(s.actQtyConv).toFixed(2),label:"",height:"26","background-color":"grey lighten-4","single-line":"",onclick:"this.select();",rules:t.qtyRules},on:{change:function(a){return t.calcItemPrice(s,e)}},model:{value:s.actQtyConv,callback:function(e){t.$set(s,"actQtyConv",e)},expression:"itempo.actQtyConv"}})],1)],1)],1),a("v-divider")],1)],1)})),a("v-list-item",{attrs:{dense:""}},[a("v-list-item-content",{staticClass:"ma-0 pa-0",attrs:{dens:""}},[a("v-container",{staticClass:"ma-0 pa-0"},[a("v-row",[a("v-col",{staticClass:"mt-2 pb-0 hidden-sm-and-down",staticStyle:{"font-size":"11px","font-style":"italic"},attrs:{cols:"6"}},[t._v("Unit Price $ "+t._s(e.actPriceFinal)+" / "+t._s(e.defaultUnits))]),a("v-col",{staticClass:"mt-2 pb-0 hidden-md-and-up",staticStyle:{"font-size":"11px","font-style":"italic"},attrs:{cols:"6"}},[t._v("Unit Price $ "+t._s(e.actPriceFinal)+" / "+t._s(e.defaultUnits))]),a("v-col",{staticClass:"mt-2 pl-6 hidden-sm-and-down text-md-end",attrs:{cols:"4"}},[t._v("Total Packed Qty:")]),a("v-col",{staticClass:"mt-2 pa-3 hidden-sm-and-down",staticStyle:{"font-weight":"bold",color:"#33691E"},attrs:{cols:"2"}},[t._v(t._s(t.grandTotal))]),a("v-col",{staticClass:"mt-2 pa-3 hidden-md-and-up",staticStyle:{"font-size":"12px","text-align":"right"},attrs:{cols:"6"}},[t._v("Total Qty: "),a("span",{staticStyle:{color:"#33691E","font-weight":"bold"}},[t._v(t._s(t.grandTotal))])])],1),a("v-row",[a("v-col",{staticClass:"hidden-md-and-up"},[a("v-btn",{staticClass:"float-right",attrs:{color:"success",disabled:!t.valid,small:""},on:{click:function(a){return t.savePo(e)}}},[t._v("Save")])],1),a("v-col",{staticClass:"hidden-sm-and-down"},[a("v-btn",{staticClass:"float-right",attrs:{color:"success",disabled:!t.valid},on:{click:function(a){return t.savePo(e)}}},[t._v("Save")])],1)],1)],1),a("v-divider")],1)],1)],2)],1)],1)],1)})),1)],1),a("v-snackbar",{attrs:{"multi-line":t.multiLine},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(this.message)+" "),a("v-btn",{attrs:{color:"red",text:""},on:{click:function(e){t.snackbar=!1}}},[t._v("Close")])],1)],1)},Le=[],De={name:"packagingByItem",data(){return{ordItems:[],localItemPo:[],localUsers:[],valid:!1,snackbar:!1,message:null,multiLine:!0,hiddenTextFlag:!1,itemUnitPrice:0,allQtyEntered:!0,qtyRules:[t=>!isNaN(t)||"Please enter a number"],itemQty:[]}},async mounted(){await this.getItems()},created(){this.getQtyByItem(),this.getUsers()},methods:{...Object(d["b"])(["getOrdersAction","getItemsAction","getPurchaseOrderByOrderIdAction","getBulkOrderByOrderIdAction","updatePurchaseOrderAction","updateBulkOrderAction"]),toggleGmsLbs(){this.isPounds=!this.isPounds,this.localItemPo.forEach(t=>{t.qtyConv=this.convertGmsToLbs(t.qtyConv,t.defaultUnitsConv),t.suggestedQtyConv=this.convertGmsToLbs(t.suggestedQtyConv,t.defaultUnitsConv),t.actQtyConv=this.convertGmsToLbs(t.actQtyConv,t.defaultUnitsConv),t.defaultUnitsConv=this.getDefaultUnits(t.defaultUnitsConv)})},convertGmsToLbs(t,e){return"kgs"!==e&&"lbs"!==e?t:this.isPounds&&"lbs"===e?t||null:this.isPounds&&"kgs"===e?t?(2.20462*t).toFixed(2):null:this.isPounds||"kgs"!==e?this.isPounds||"lbs"!==e?void 0:t?(.453592*parseFloat(t)).toFixed(2):null:t||null},calcItemPrice:function(t,e){0!==parseFloat(t.actQtyConv)&&""!==t.actQtyConv||(t.isPacked=0),"lbs"===t.defaultUnits&&"kgs"===t.defaultUnitsConv?t.actQty=2.20462*t.actQtyConv:"kgs"===t.defaultUnits&&"lbs"===t.defaultUnitsConv?t.actQty=.453592*t.actQtyConv:t.actQty=t.actQtyConv,this.allQtyEntered=!0,parseInt(e.totalPrice)>0&&parseInt(this.grandTotalAct)>0&&this.allQtyEntered&&(this.itemUnitPrice=t.actPriceFinal=e.actPriceFinal=this.grandTotalAct>0?this.roundUp(e.totalPrice/this.grandTotalAct,2).toFixed(2):0),this.allQtyEntered||(this.itemUnitPrice=t.actPriceFinal=e.actPriceFinal=0)},roundUp(t,e){return e=Math.pow(10,e),Math.ceil(t*e)/e},getDefaultUnits(t){return"kgs"!==t&&"lbs"!==t?t:this.isPounds?"lbs":"kgs"},getQtyByItem(){this.itemQty=[],this.purchaseOrders.forEach(t=>{if(0===parseFloat(t.isCancelled))if(0!==this.itemQty.length&&this.itemQty.find(e=>e.itemId===t.itemId)){let e=this.itemQty.find(e=>e.itemId===t.itemId);e.qty=parseFloat(e.qty)+parseFloat(t.qty)}else this.itemQty.push({itemId:t.itemId,qty:parseFloat(t.qty)})})},async getItems(){await this.getPurchaseOrderByOrderIdAction(this.getCurrentOrder.id),await this.getBulkOrderByOrderIdAction(this.getCurrentOrder.id),await this.bulkOrders.forEach(t=>{t.orderId,this.getCurrentOrder.id;let e=this.itemQty.find(e=>e.itemId===t.itemId);if(e){var a=this.items.find(e=>parseInt(e.id)===parseInt(t.itemId)&&1===parseInt(e.isActive));if(a){let e=this.bulkOrders.find(t=>t.itemId===a.id&&parseInt(t.actQty)>0&&parseFloat(t.actPrice)>0);e&&this.ordItems.push({id:t.id,orderId:t.orderId,itemId:a.id,itemName:a.name,actQty:t.actQty,actPrice:t.actPrice,actPriceFinal:t.actPriceFinal?parseFloat(this.roundUp(t.actPriceFinal,2)).toFixed(2):0,totalPrice:t.totalPrice,defaultUnits:a.defaultUnits,userCount:this.purchaseOrders.filter(t=>t.itemId===a.id&&0===parseInt(t.isCancelled)).length})}}}),this.ordItems.sort((function(t,e){return t.itemName<e.itemName?-1:t.itemName>e.itemName?1:0}))},async getItemPo(t){this.localItemPo=[];let e=await this.purchaseOrders.filter(e=>parseInt(e.itemId)===parseInt(t.itemId)&&0===parseInt(e.isCancelled));await e.forEach(e=>{var a=this.purchaseOrders.find(t=>parseInt(t.itemId)===parseInt(e.itemId));a&&this.localItemPo.push({id:e.id,orderId:e.orderId,itemId:e.itemId,userId:e.userId,buyer:this.getUserName(e.userId).firstname,qty:e.qty,qtyConv:this.convertGmsToLbs(e.qty,t.defaultUnits),actQty:e.actQty,actQtyConv:this.convertGmsToLbs(e.actQty,t.defaultUnits),suggestedQty:e.suggestedQty,suggestedQtyConv:this.convertGmsToLbs(e.suggestedQty,t.defaultUnits),actPrice:t.actPrice,isCancelled:e.isCancelled,isPacked:e.isPacked,itemName:t.name,defaultUnits:t.defaultUnits,defaultUnitsConv:this.getDefaultUnits(t.defaultUnits),totalPrice:((t.actPrice?parseFloat(t.actPrice):0)*(e.actQty?parseFloat(e.actQty):0)).toFixed(2)})}),this.localItemPo.sort((function(t,e){return t.buyer<e.buyer?-1:t.buyer>e.buyer?1:0}))},async savePo(t){await this.localItemPo.forEach(t=>{this.tempPO={id:t.id,orderId:t.orderId,itemId:t.itemId,userId:t.userId,qty:t.qty,actQty:parseFloat(t.actQty),actPrice:parseFloat(t.actPrice),suggestedQty:t.suggestedQty,isCancelled:t.isCancelled,isPacked:t.isPacked},this.updatePurchaseOrderAction(this.tempPO)}),await this.updateBulkOrderAction(t),this.snackMessage("Updated Data!")},async getUsers(){await xt.getAllUsers().then(t=>{this.localUsers=t}),this.localUsers.forEach(t=>{t["allPacked"]=!1})},snackMessage:function(t){this.message=t,this.snackbar=!0},getUserName:function(t){return this.localUsers.find(e=>parseInt(e.id)===parseInt(t))},async itemPacked(t){if(t.actQty&&t.actQty>0){let e=1===parseInt(t.isPacked)?0:1;t.isPacked=e}else this.snackMessage("Please enter 'Actual Quantity' before marking it packed.")}},computed:{...Object(d["d"])(["bulkOrders","items","purchaseOrders","getActiveBulkOrders"]),...Object(d["c"])(["getCurrentOrder"]),grandTotal:function(){var t=0;return this.localItemPo.forEach(e=>{e&&(isNaN(e.actQtyConv)||(t+=e.actQtyConv?parseFloat(e.actQtyConv):null))}),t.toFixed(2)},grandTotalAct:function(){var t=0;return this.localItemPo.forEach(e=>{e&&(this.allQtyEntered&&(this.allQtyEntered=0!==parseInt(e.actQty)),t+=e.actQty?parseFloat(e.actQty):null)}),t.toFixed(2)},isPounds:{get(){return this.$store.state.isPounds},set(t){this.$store.commit("togglePounds",t)}}}},qe=De,Me=Object(p["a"])(qe,Be,Le,!1,null,"be907812",null),Re=Me.exports;h()(Me,{VBtn:O["a"],VCard:w["a"],VCol:Nt["a"],VContainer:jt["a"],VDivider:A["a"],VExpansionPanel:ye["a"],VExpansionPanelContent:be["a"],VExpansionPanelHeader:ke["a"],VExpansionPanels:Ce["a"],VFlex:ie["a"],VForm:Q["a"],VIcon:D["a"],VListItem:zt["a"],VListItemContent:Gt["a"],VRow:Kt["a"],VSnackbar:U["a"],VTextField:S["a"],VTooltip:Jt["a"]});var Ne=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-card",{staticClass:"mx-auto ma-12",attrs:{"max-width":"1100",color:"orange",rounded:""}},[a("v-container",{attrs:{fluid:""}},[a("v-layout",{attrs:{column:""}},[a("v-card",[a("v-card-text",[a("v-text-field",{attrs:{label:"FirstName"},model:{value:t.localUser.firstname,callback:function(e){t.$set(t.localUser,"firstname",e)},expression:"localUser.firstname"}}),a("v-text-field",{attrs:{label:"Last Name"},model:{value:t.localUser.lastname,callback:function(e){t.$set(t.localUser,"lastname",e)},expression:"localUser.lastname"}}),a("v-text-field",{attrs:{label:"Email Address",disabled:""},model:{value:t.localUser.email,callback:function(e){t.$set(t.localUser,"email",e)},expression:"localUser.email"}}),a("v-text-field",{attrs:{label:"Phone"},model:{value:t.localUser.phone,callback:function(e){t.$set(t.localUser,"phone",e)},expression:"localUser.phone"}}),a("v-text-field",{attrs:{label:"Password",autofocus:"",rules:t.passwordRules},model:{value:t.localUser.password,callback:function(e){t.$set(t.localUser,"password",e)},expression:"localUser.password"}})],1),a("v-card-actions",[a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(e){return t.updateUser(e)}}},[a("v-icon",{attrs:{left:"",dark:""}},[t._v("mdi-check")]),t._v("Save Changes ")],1)],1)],1)],1)],1)],1)],1),a("v-snackbar",{attrs:{"multi-line":t.multiLine},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(this.message)+" "),a("v-btn",{attrs:{color:"red",text:""},on:{click:function(e){t.snackbar=!1}}},[t._v("Close")])],1)],1)},je=[],ze={pageTitle:"My Profile",data(){return{password:"",localUser:{id:0,firstname:"",lastname:"",phone:"",email:"",password:"",isAdmin:0,isPacker:0,active:0},valid:!1,snackbar:!1,message:null,multiLine:!0,passwordRules:[]}},mounted(){this.localUser={id:this.user.id,firstname:this.user.firstname,lastname:this.user.lastname,phone:this.user.phone,email:this.user.email,isAdmin:this.user.isAdmin,isPacker:this.user.isPacker,active:this.user.active,password:""}},methods:{...Object(d["b"])(["updateUserAction"]),updateUser(){this.$refs.form.validate()&&(this.updateUserAction(this.localUser),this.snackMessage("User Data updated!"))},snackMessage:function(t){this.message=t,this.snackbar=!0}},computed:{...Object(d["d"])(["user"])}},Ge=ze,Ke=a("a722"),He=Object(p["a"])(Ge,Ne,je,!1,null,null,null),We=He.exports;h()(He,{VBtn:O["a"],VCard:w["a"],VCardActions:P["a"],VCardText:P["b"],VContainer:jt["a"],VForm:Q["a"],VIcon:D["a"],VLayout:Ke["a"],VSnackbar:U["a"],VTextField:S["a"]});var Je=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Ye=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",[t._v("Access Denied")])])}],Xe={},Ze=Xe,ta=Object(p["a"])(Ze,Je,Ye,!1,null,"411d2a0a",null),ea=ta.exports,aa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",{staticClass:"mx-auto mt-5",attrs:{"max-width":"1100",color:"orange",rounded:""}},[a("v-list-item",{attrs:{dense:""}},[a("v-list-item-content",{staticClass:"ma-0 pb-0",attrs:{dens:""}},[a("v-container",{staticClass:"ma-0 pa-0"},[a("v-row",[a("v-col",{staticClass:"hidden-md-and-up pt-4 ma-0",attrs:{cols:"8"}},[t._v("Order Summary")]),a("v-col",{staticClass:"hidden-md-and-up pt-2 ma-0",attrs:{cols:"4"}},[t.isOrderLocked?a("v-btn",{staticClass:"hidden-md-and-up mr-1 pa-",staticStyle:{"font-size":"12px"},attrs:{text:"","min-width":"1","max-height":"3"},on:{click:t.toggleOrderLock}},[t._v(" closed ")]):t._e(),t.isOrderLocked?t._e():a("v-btn",{staticClass:"hidden-md-and-up mr-1 pa-0",staticStyle:{"font-size":"12px"},attrs:{text:"","min-width":"1","max-height":"3"},on:{click:t.toggleOrderLock}},[t._v(" open ")]),a("v-btn",{staticClass:"ma-0 pa-0 hidden-md-and-up",staticStyle:{"font-size":"12px"},attrs:{text:"","min-width":"4","max-height":"3"},on:{click:t.generatePdf}},[t._v(" | PDF ")])],1),a("v-col",{staticClass:"text-md-center hidden-sm-and-down",attrs:{cols:"9"}},[t._v("Order Summary")]),a("v-col",{staticClass:"text-md-center hidden-sm-and-down ma-0 pa-0",staticStyle:{display:"inline"},attrs:{cols:"3"}},[a("span",[t.isOrderLocked?a("v-btn",{staticClass:"hidden-sm-and-down",staticStyle:{"font-size":"11px"},attrs:{text:""},on:{click:t.toggleOrderLock}},[t._v(" closed ")]):t._e(),t.isOrderLocked?t._e():a("v-btn",{staticClass:"hidden-sm-and-down",staticStyle:{"font-size":"11px"},attrs:{text:""},on:{click:t.toggleOrderLock}},[t._v(" open ")]),t._v("| "),a("v-btn",{staticClass:"ma-0 pa-0 hidden-sm-and-down",staticStyle:{"font-size":"11px"},attrs:{text:""},on:{click:t.generatePdf}},[t._v("PDF")])],1)])],1)],1)],1)],1)],1),a("v-card",{staticClass:"mx-auto pa-0 mt-3",attrs:{"max-width":"1100"}},[a("v-sheet",{staticClass:"ml-2",staticStyle:{color:"#006064"},attrs:{rounded:""}},[t._v("Total No of Orders: "+t._s(t.userCount))]),a("v-sheet",{staticClass:"ml-2",staticStyle:{color:"green","font-style":"italic","font-size":"14px"},attrs:{rounded:""}},[t._v("Packer(s): "+t._s(t.getPacker()))])],1),a("v-layout",{directives:[{name:"resize",rawName:"v-resize",value:t.onResize,expression:"onResize"}],staticClass:"mt-2",staticStyle:{"padding-top":"7px"},attrs:{column:""}},[a("v-data-table",{staticClass:"elevation-1 mt-8; text-align:right; pa-0",class:{mobile:t.isMobile},attrs:{headers:t.reportHeader,items:t.reportData,"hide-default-footer":"","items-per-page":100,mobile:t.isMobile,"disable-sort":t.isMobile,"disable-filtering":t.isMobile,"disable-pagination":t.isMobile,"hide-default-header":t.isMobile},scopedSlots:t._u([{key:"item.userName",fn:function(e){var s=e.item;return[a("v-chip",{attrs:{label:"",ripple:"",draggable:""}},[t._v(t._s(s.userName))])]}}])},[a("template",{slot:"body.append"},[a("tr",{staticClass:"hidden-sm-and-down"},t._l(t.reportTotalRow,(function(e,s){return a("td",{key:s,staticStyle:{"background-color":"grey"}},[t._v(t._s(e))])})),0)])],2)],1),a("v-snackbar",{attrs:{id:"header-snackbar","multi-line":t.multiLine},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(this.message)+" "),a("v-btn",{attrs:{color:"red",text:""},on:{click:function(e){t.snackbar=!1}}},[t._v("Close")])],1)],1)},sa=[],ia=(a("0da4"),{name:"orderReport",data(){return{localUsers:[],allItems:[],reportData:[],reportHeader:[],reportRow:[],reportTotalRow:[],pdfRow:[],pdfRows:[],pdfColumns:[],pdfTotalsRow:[],itemQty:[],valid:!1,snackbar:!1,message:null,multiLine:!0,isOrderLocked:0,userCount:0,userItemCount:0,isMobile:!1}},async created(){},async mounted(){await this.setOrderLock(),await this.getQtyByItem(),await this.getData()},methods:{...Object(d["b"])(["getPurchaseOrderByOrderIdAction","updateOrderAction"]),onResize(){parseInt(window.innerWidth)<769?this.isMobile=!0:this.isMobile=!1},getQtyByItem(){this.itemQty=[],this.purchaseOrders.forEach(t=>{if(0===parseInt(t.isCancelled))if(0!==this.itemQty.length&&this.itemQty.find(e=>e.itemId===t.itemId)){let e=this.itemQty.find(e=>e.itemId===t.itemId);e.qty=parseFloat(e.qty)+parseFloat(t.qty)}else this.itemQty.push({itemId:t.itemId,qty:parseFloat(t.qty)})})},setOrderLock:function(){this.isOrderLocked=1===parseInt(this.getCurrentOrder.isLocked)},snackMessage:function(t){this.message=t,this.snackbar=!0},async toggleOrderLock(){this.isOrderLocked=1===parseInt(this.getCurrentOrder.isLocked)?0:1,await this.updateOrderAction({id:this.getCurrentOrder.id,orderDt:this.getCurrentOrder.orderDt,cutOffDt:null,orderStatus:this.getCurrentOrder.orderStatus,isLocked:this.isOrderLocked}),1===parseInt(this.isOrderLocked)?(this.snackMessage("This order is now closed for changes!"),this.sendEmail()):0===parseInt(this.isOrderLocked)&&this.snackMessage("This order is Unlocked!")},async sendEmail(){await xt.sendEmailConsolidatedOrder(this.getCurrentOrder.id,this.user.id).catch(t=>{console.log(t),this.snackMessage("Failed to send Email.")})},generatePdf(){var t=new ce("l","pt","4A0");t.setProperties({title:"Vegetable Buying Club Summary - Order No: "+this.getCurrentOrder.id,subject:"Order Summary",author:"Vegetable Buying Club",keywords:"generated, javascript, web 2.0, ajax",creator:"MEEE"}),t.setFont("PTSans"),t.setFontSize(10),t.setFontStyle("italic"),t.text("Vegetable Buying Club Summary - Order No: "+this.getCurrentOrder.id,300,15),t.text("Packer(s) : "+this.getPacker(),50,25),t.autoTable({columnStyles:{userName:{halign:"center"}},styles:{fontSize:5,cellWidth:"auto",font:"helvetica"},theme:"striped",body:this.pdfRows,columns:this.pdfColumns}),t.save(`OrderSummary_${this.getCurrentOrder.id}.pdf`)},async getData(){await this.getUsers(),await this.getPurchaseOrderByOrderIdAction(this.getCurrentOrder.id),this.bulkOrders.forEach(t=>{let e=this.items.find(e=>e.id===t.itemId&&1===parseInt(e.isActive));e&&this.allItems.push({id:t.itemId,name:e.name})}),this.allItems.sort((function(t,e){return t.name<e.name?-1:t.name>e.name?1:0})),this.allItems.forEach(t=>{let e=this.items.find(e=>e.id===t.id&&1===parseInt(e.isActive));e&&(this.reportHeader.push({text:`${e.name} (${e.defaultUnits})`,value:"i_"+e.id,class:"grey"}),this.pdfColumns.push({title:`${e.name} (${e.defaultUnits})`,dataKey:"i_"+e.id}))}),this.reportHeader.unshift({text:"Buyer",value:"userName",sortable:!0,align:"start",class:"grey"}),this.pdfColumns.unshift({title:"Buyer",dataKey:"userName"}),this.localUsers.sort((function(t,e){return t.firstname<e.firstname?-1:t.firstname>e.firstname?1:0})).forEach(t=>{this.userItemCount=0,this.reportRow={},this.reportTotalRow=[],this.reportRow={userName:`${t.firstname} ${t.lastname} - ${this.userItemCount} `},this.purchaseOrders.forEach(e=>{e.userId===t.id&&0===parseInt(e.isCancelled)&&(this.reportRow["i_"+e.itemId]=e.qty.toString().replace(/\.00$/,""),this.userItemCount++)}),this.reportRow["userName"]=`${t.firstname} ${t.lastname} - (${this.userItemCount}) `;let e=this.purchaseOrders.find(e=>e.userId===t.id&&e.orderId===this.getCurrentOrder.id&&0===parseInt(e.isCancelled));e&&(this.reportData.push(this.reportRow),this.userCount++)}),this.pdfTotalsRow={userName:"Total"},this.allItems.forEach(t=>{let e=this.itemQty.find(e=>e.itemId===t.id);e?(this.reportTotalRow.push(e.qty),this.pdfTotalsRow["i_"+t.id]=e.qty):(this.reportTotalRow.push(""),this.pdfTotalsRow["i_"+t.id]="")}),this.reportTotalRow.unshift("Total"),this.reportData.forEach(t=>{this.pdfRow={},Object.keys(this.pdfTotalsRow).forEach(e=>{t[e]?this.pdfRow[e]=t[e]:this.pdfRow[e]=""}),this.pdfRows.push(this.pdfRow)}),this.pdfRows.push(this.pdfTotalsRow)},async getUsers(){await xt.getAllUsers().then(t=>{this.localUsers=t})},getPacker(){let t="";return this.localUsers.forEach(e=>{1===parseInt(e.isPacker)&&(t&&(t+=", "),t+=`${e.firstname} ${e.lastname}`)}),t}},computed:{...Object(d["d"])(["purchaseOrders","bulkOrders","items","user"]),...Object(d["c"])(["getCurrentOrder"])}}),ra=ia,na=(a("4ff2"),a("cc20")),la=a("8fea"),oa=a("269a"),ca=a.n(oa),da=a("dc22"),ma=Object(p["a"])(ra,aa,sa,!1,null,null,null),ua=ma.exports;h()(ma,{VBtn:O["a"],VCard:w["a"],VChip:na["a"],VCol:Nt["a"],VContainer:jt["a"],VDataTable:la["a"],VLayout:Ke["a"],VListItem:zt["a"],VListItemContent:Gt["a"],VRow:Kt["a"],VSheet:q["a"],VSnackbar:U["a"]}),ca()(ma,{Resize:da["a"]});var pa=a("0284"),va=a.n(pa),ha=a("0e44");s["a"].use(d["a"]);const ga=()=>({user:{id:0,email:"",firstname:"",lastname:"",phone:""},orders:[],orderstatus:[],items:[],purchaseOrders:[],bulkOrders:[],isPounds:!1,isOrderLocked:!1,isUserLoggedIn:!1}),fa=ga(),ya={togglePounds(t,e){t.isPounds=e},toggleOrderLocked(t,e){t.isOrderLocked=e},updateUser(t,e){t.user=e},resetState(t){localStorage.removeItem("userId"),Object.assign(t,ga()),t.isUserLoggedIn=!1},signIn(t,e){e&&(t.user=e,t.isUserLoggedIn=!0)},getOrderStatus(t,e){t.orderstatus=e},getOrders(t,e){t.orders=e},addOrder(t,e){t.orders.unshift(...e)},updateOrder(t,e){const a=t.orders.findIndex(t=>t.id===e.id);t.orders.splice(a,1,e),t.orders=[...t.orders]},deleteOrder(t,e){t.orders=[...t.orders.filter(t=>t.id!==e.id)]},getItems(t,e){t.items=e},addItem(t,e){t.items.unshift(...e)},updateItem(t,e){const a=t.items.findIndex(t=>t.id===e.id);t.items.splice(a,1,e),t.items=[...t.items]},deleteItem(t,e){t.items=[...t.items.filter(t=>t.id!==e.id)]},getPurchaseOrder(t,e){t.purchaseOrders=e},addPurchaseOrder(t,e){t.purchaseOrders.unshift(...e)},updatePurchaseOrder(t,e){const a=t.purchaseOrders.findIndex(t=>t.id===e.id);t.purchaseOrders.splice(a,1,e),t.purchaseOrders=[...t.purchaseOrders]},deletePurchaseOrder(t,e){t.purchaseOrders=[...t.purchaseOrders.filter(t=>t.id!==e.id)]},getBulkOrder(t,e){t.bulkOrders=e},addBulkOrder(t,e){t.bulkOrders.unshift(...e)},updateBulkOrder(t,e){const a=t.bulkOrders.findIndex(t=>t.id===e.id);t.bulkOrders.splice(a,1,e),t.bulkOrders=[...t.bulkOrders]},deleteBulkOrder(t,e){t.purchaseOrders=[...t.purchaseOrders.filter(t=>t.id!==e.id)]}},ba={async resetStateAction({commit:t}){t("resetState")},async signInAction({commit:t},e){const a=await xt.signIn(e);t("signIn",a)},async updateUserAction({commit:t},e){await xt.updateUser(e),t("updateUser",e)},async getOrderStatusAction({commit:t}){const e=await xt.getOrderStatus();t("getOrderStatus",e)},async getOrdersAction({commit:t}){const e=await xt.getOrders();t("getOrders",e)},async addOrderAction({commit:t},e){const a=await xt.addOrder(e);t("addOrder",a)},async updateOrderAction({commit:t},e){const a=await xt.updateOrder(e);t("updateOrder",a)},async deleteOrderAction({commit:t},e){await xt.deleteOrder(e),t("deleteOrder",e)},async getItemsAction({commit:t}){const e=await xt.getItems();t("getItems",e)},async addItemAction({commit:t},e){const a=await xt.addItem(e);t("addItem",a)},async updateItemAction({commit:t},e){const a=await xt.updateItem(e);t("updateItem",a)},async deleteItemAction({commit:t},e){const a=await xt.deleteItem(e);a&&t("deleteItem",e)},async getPurchaseOrderAction({commit:t}){const e=await xt.getPurchaseOrder();t("getPurchaseOrder",e)},async getPurchaseOrderByOrderIdAction({commit:t},e){const a=await xt.getPurchaseOrderByOrderId(e);t("getPurchaseOrder",a)},async addPurchaseOrderAction({commit:t},e){const a=await xt.addPurchaseOrder(e);t("addPurchaseOrder",a)},async updatePurchaseOrderAction({commit:t},e){const a=await xt.updatePurchaseOrder(e);t("updatePurchaseOrder",a)},async deletePurchaseOrderAction({commit:t},e){const a=await xt.deletePurchaseOrder(e);a&&t("deletePurchaseOrder",e)},async getBulkOrderAction({commit:t}){const e=await xt.getBulkOrder();t("getBulkOrder",e)},async getBulkOrderByOrderIdAction({commit:t},e){const a=await xt.getBulkOrderByOrderId(e);t("getBulkOrder",a)},async addBulkOrderAction({commit:t},e){const a=await xt.addBulkOrder(e);t("addBulkOrder",a)},async updateBulkOrderAction({commit:t},e){const a=await xt.updateBulkOrder(e);t("updateBulkOrder",a)},async deleteBulkOrderAction({commit:t},e){const a=await xt.deleteBulkOrder(e);a&&t("deleteBulkOrder",e)}},ka={getUserName:t=>t.user?void 0===t.user.firstname||""===t.user.firstname?"Guest":t.user.firstname+" "+t.user.lastname:"Guest",isUserAuthenticated:()=>{let t=parseInt(localStorage.getItem("userId"));if(t>0)return!0},isAdminUser:t=>{if(t.user)return 1===parseInt(t.user.isAdmin)},getItemById:t=>e=>t.items.find(t=>parseInt(t.id)===parseInt(e)),getActiveOrderStatus:function(t){return t.orderstatus?t.orderstatus.find(t=>"Active"===t.status):0},getCurrentOrder:function(t,e){var a=e.getActiveOrderStatus,s=t.orders.find(t=>t.orderStatus===a.id);return s},getActiveItems:function(t){let e=t.items.filter(t=>1===parseInt(t.isActive));return e},getActiveBulkOrders:function(t,e){let a=[];return e.getActiveItems.forEach(s=>{let i=t.bulkOrders.find(t=>parseInt(t.itemId)===parseInt(s.id)&&parseInt(t.orderId)===parseInt(e.getCurrentOrder.id));a.push(i)}),a},getActualPrice:function(t){let e=[];return t.bulkOrders.forEach(t=>{parseFloat(t.actPriceFinal)>0&&e.push({itemId:t.itemId,price:t.actPriceFinal})}),e}};var Ca=new d["a"].Store({state:fa,mutations:ya,actions:ba,getters:ka,plugins:[Object(ha["a"])()]});s["a"].use(k["a"]);const Ia=[{path:"/",redirect:"/orderEntry",meta:{requiresAuth:!0}},{path:"/accessDenied",name:"accessDenied",component:ea},{path:"/dashboard",name:"dashboard",component:N,meta:{requiresAuth:!0,adminOnly:!1}},{path:"/profile",name:"profile",component:We,meta:{requiresAuth:!0}},{path:"/orderEntry",name:"orderEntry",component:ne,meta:{requiresAuth:!0}},{path:"/orderReport",name:"orderReport",component:ua,meta:{requiresAuth:!0,adminOnly:!0}},{path:"/orderRecon",name:"orderRecon",component:Ee,meta:{requiresAuth:!0,adminOnly:!0}},{path:"/packagingByItem",name:"packagingByItem",component:Re,meta:{requiresAuth:!0,packerOnly:!0}},{path:"/allUserOrders",name:"allUserOrders",component:Ue,meta:{requiresAuth:!0,packerOnly:!0}},{path:"/bulkOrder",name:"bulkOrder",component:pe,meta:{requiresAuth:!0,adminOnly:!0}},{path:"/orders",name:"orders",component:xe,meta:{requiresAuth:!0,adminOnly:!0}},{path:"/login",name:"login",component:T},{path:"/register",name:"register",component:Pt,meta:{requiresAuth:!0,adminOnly:!0}},{path:"/about",name:"About",component:Vt},{path:"/manageitems",name:"ManageItems",component:Lt,meta:{requiresAuth:!0,adminOnly:!0}},{path:"/manageUsers",name:"ManageUsers",component:Xt,meta:{requiresAuth:!0,adminOnly:!0}}],xa=new k["a"]({base:"",routes:Ia});xa.beforeEach((t,e,a)=>{t.matched.some(t=>t.meta.requiresAuth)?"login"===t.name||Ca.state.isUserLoggedIn?t.matched.some(t=>t.meta.adminOnly&&parseInt(Ca.state.user.isAdmin)===parseInt(0))||t.matched.some(t=>t.meta.packerOnly&&parseInt(Ca.state.user.isPacker)===parseInt(0)&&parseInt(Ca.state.user.isAdmin)===parseInt(0))?a({name:"accessDenied"}):a():a({name:"login"}):"login"===t.name&&Ca.state.isUserLoggedIn?a({name:"orderEntry"}):a()}),s["a"].use(va.a,{id:"UA-163162436-2",router:xa});var _a=xa,Oa=a("f309");s["a"].use(Oa["a"]);var wa=new Oa["a"]({}),Pa=a("8103"),Aa=a.n(Pa),Qa=a("bba4"),Ua=a.n(Qa);s["a"].config.productionTip=!1,s["a"].use(va.a,{id:"UA-163162436-1"});const Fa=a("ef13");Fa.keys().forEach(t=>{const e=Fa(t),a=Aa()(Ua()(t.split("/").pop().replace(/\.\w+$/,"")));s["a"].component(a,e.default||e)}),new s["a"]({router:_a,store:Ca,vuetify:wa,render:function(t){return t(b)}}).$mount("#app")},"890b":function(t,e,a){},b2de:function(t,e,a){"use strict";var s=a("1f5a"),i=a.n(s);i.a},c406:function(t,e,a){"use strict";var s=a("e8b8"),i=a.n(s);i.a},e8b8:function(t,e,a){},eb15:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("v-card",{staticClass:"mx-auto mt-5",attrs:{"max-width":"1100",color:"orange",rounded:""}},[a("v-list-item",{attrs:{dense:""}},[a("v-list-item-content",{staticClass:"ma-0 pa-0",attrs:{dens:""}},[a("v-container",{staticClass:"ma-0 pa-0"},[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"pt-1 text-md-center",attrs:{cols:"10"}},[t._v("Manage Items")]),a("v-col",{staticClass:"text-md-center pl-2",attrs:{cols:"2"}},[a("v-dialog",{key:t.localItem.id,attrs:{width:"500",id:t.localItem.id},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-icon",t._g({attrs:{color:"black",dark:""},on:{click:function(e){return t.initializeItem()}}},s),[t._v("mdi-plus")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[t._v("Item Details")]),a("v-card-text",[a("v-text-field",{attrs:{counter:100,rules:t.nameRules,label:"Item Name",required:""},model:{value:t.updatedItem.name,callback:function(e){t.$set(t.updatedItem,"name",e)},expression:"updatedItem.name"}}),a("v-text-field",{attrs:{label:"Description"},model:{value:t.updatedItem.description,callback:function(e){t.$set(t.updatedItem,"description",e)},expression:"updatedItem.description"}}),a("v-text-field",{attrs:{label:"Minimum Quantity"},model:{value:t.updatedItem.minQty,callback:function(e){t.$set(t.updatedItem,"minQty",e)},expression:"updatedItem.minQty"}}),a("v-text-field",{attrs:{label:"Maximum Quantity"},model:{value:t.updatedItem.maxQty,callback:function(e){t.$set(t.updatedItem,"maxQty",e)},expression:"updatedItem.maxQty"}}),a("v-select",{attrs:{items:t.units,label:"Unit",required:""},model:{value:t.updatedItem.defaultUnits,callback:function(e){t.$set(t.updatedItem,"defaultUnits",e)},expression:"updatedItem.defaultUnits"}}),a("v-text-field",{attrs:{label:"Price"},model:{value:t.updatedItem.price,callback:function(e){t.$set(t.updatedItem,"price",e)},expression:"updatedItem.price"}}),a("v-btn",{staticClass:"mr-4",attrs:{disabled:!t.valid,color:"success"},on:{click:[function(e){return t.addNewItem()},function(e){e.stopPropagation(),t.dialog=!1}]}},[t._v("Save")]),a("v-btn",{staticClass:"mr-4",attrs:{color:"error"},on:{click:[function(e){return t.initializeItem()},function(e){e.stopPropagation(),t.dialog=!1}]}},[t._v("Cancel")])],1),a("v-divider"),a("v-card-actions",[a("v-spacer")],1)],1)],1)],1)],1)],1)],1)],1)],1),a("v-card",{staticClass:"mx-auto ma-3",attrs:{"max-width":"1100",tile:"",dense:"",shaped:""}},[a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Name")]),a("th",{staticClass:"text-left"},[t._v("Item Details")]),a("th",{staticClass:"text-left"},[t._v("Active")])])]),a("tbody",t._l(t.items,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.name))]),a("td",[a("v-dialog",{key:e.id,attrs:{width:"500",id:e.id},scopedSlots:t._u([{key:"activator",fn:function(s){var i=s.on;return[a("v-icon",t._g({attrs:{color:"primary",id:e.id,dark:""},on:{click:function(a){return t.editItem(e)}}},i),[t._v("mdi-pencil")])]}}],null,!0),model:{value:t.dialogEdit[e.id],callback:function(a){t.$set(t.dialogEdit,e.id,a)},expression:"dialogEdit[item.id]"}},[a("v-card",[a("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[t._v("Item Details")]),a("v-card-text",[a("v-text-field",{attrs:{counter:100,rules:t.nameRules,label:"Item Name",required:"",onclick:"this.select();"},model:{value:t.tempItem.name,callback:function(e){t.$set(t.tempItem,"name",e)},expression:"tempItem.name"}}),a("v-text-field",{attrs:{label:"Description",onclick:"this.select();"},model:{value:t.tempItem.description,callback:function(e){t.$set(t.tempItem,"description",e)},expression:"tempItem.description"}}),a("v-text-field",{attrs:{value:parseFloat(t.tempItem.minQty).toFixed(2),label:"Minimum Quantity",onclick:"this.select();"},model:{value:t.tempItem.minQty,callback:function(e){t.$set(t.tempItem,"minQty",e)},expression:"tempItem.minQty"}}),a("v-text-field",{attrs:{value:parseFloat(t.tempItem.maxQty).toFixed(2),label:"Maximum Quantity",onclick:"this.select();"},model:{value:t.tempItem.maxQty,callback:function(e){t.$set(t.tempItem,"maxQty",e)},expression:"tempItem.maxQty"}}),a("v-select",{attrs:{items:t.units,label:"Unit",required:""},model:{value:t.tempItem.defaultUnits,callback:function(e){t.$set(t.tempItem,"defaultUnits",e)},expression:"tempItem.defaultUnits"}}),a("v-text-field",{attrs:{label:"Price",onclick:"this.select();"},model:{value:t.tempItem.price,callback:function(e){t.$set(t.tempItem,"price",e)},expression:"tempItem.price"}}),a("v-btn",{staticClass:"mr-4",attrs:{color:"success"},on:{click:[function(a){return t.updateItem(e)},function(a){return a.stopPropagation(),t.$set(t.dialogEdit,e.id,!1)}]}},[t._v("Save")]),a("v-btn",{staticClass:"mr-4",attrs:{color:"error"},on:{click:[function(e){return t.initializeItem()},function(a){return a.stopPropagation(),t.$set(t.dialogEdit,e.id,!1)}]}},[t._v("Cancel")])],1),a("v-divider"),a("v-card-actions",[a("v-spacer")],1)],1)],1)],1),a("td",[1===parseInt(e.isActive)?a("v-icon",{attrs:{color:"green"},on:{click:function(a){return t.toggleItem(e)}}},[t._v("mdi-check")]):t._e(),0===parseInt(e.isActive)?a("v-icon",{attrs:{color:"red"},on:{click:function(a){return t.toggleItem(e)}}},[t._v("mdi-close")]):t._e()],1)])})),0)]},proxy:!0}])})],1)],1),a("v-divider"),a("v-snackbar",{attrs:{"multi-line":t.multiLine},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(this.message)+" "),a("v-btn",{attrs:{color:"red",text:""},on:{click:function(e){t.snackbar=!1}}},[t._v("Close")])],1)],1)},i=[],r=a("2f62"),n={name:"BaseManageItems",data(){return{units:["nos","bunches","kgs","lbs"],localItem:{id:0,name:null,description:null,minQty:null,maxQty:null,defaultunits:"",price:null,isActive:!0},updatedItem:{id:0,name:null,description:null,minQty:null,maxQty:null,defaultUnits:"",price:null,isActive:!0},tempItem:{id:0,name:null,description:null,minQty:null,maxQty:null,defaultUnits:"",price:null,isActive:!0},valid:!1,name:"",nameRules:[t=>!!t||"Name is required"],dialog:!1,dialogEdit:[],message:null,multiLine:!0,snackbar:!1,selected:[]}},async mounted(){await this.getItemsAction(),this.items.sort((function(t,e){return t.name<e.name?-1:t.name>e.name?1:0}))},methods:{...Object(r["b"])(["getItemsAction","addItemAction","deleteItemAction","updateItemAction"]),snackMessage:function(t){this.message=t,this.snackbar=!0},deleteItem:function(t){confirm(`Do you really want to delete Item ${t.name}?`)&&(this.deleteItemAction(t),this.snackMessage(`Category "${t.name}" deleted successfully!`))},editItem:function(t){this.valid=!0,this.tempItem={id:t.id,name:t.name,description:t.description,minQty:parseFloat(t.minQty).toFixed(2),maxQty:parseFloat(t.maxQty).toFixed(2),price:parseFloat(t.price).toFixed(2),defaultUnits:t.defaultUnits}},initializeItem:function(){this.$refs.form.validate(),this.updatedItem={id:0,name:"",description:"",minQty:"",maxQty:"",price:"",defaultUnits:null}},addNewItem:function(){this.$refs.form.validate()&&(this.addItemAction(this.updatedItem),this.snackMessage(`Item "${this.updatedItem.name}" added successfully!`))},toggleItem(t){let e="";parseInt(t.isActive)?(t.isActive,e="is Not Active"):(t.isActive,e="is Active"),t.isActive=1===parseInt(t.isActive)?0:1,this.updateItemAction({id:t.id,name:t.name,description:t.description,minQty:t.minQty,maxQty:t.maxQty,price:t.price,defaultUnits:t.defaultUnits,isActive:t.isActive}),this.snackMessage(`Item "${t.name}" ${e}!`)},updateItem:function(t){this.updateItemAction({id:this.tempItem.id,name:this.tempItem.name,description:this.tempItem.description,minQty:this.tempItem.minQty,maxQty:this.tempItem.maxQty,price:this.tempItem.price,defaultUnits:this.tempItem.defaultUnits,isActive:t.isActive}),this.snackMessage(`Item "${this.tempItem.name}" updated successfully!`)},validate(){this.$refs.form.validate()&&(this.snackbar=!0)}},computed:{...Object(r["d"])(["items"]),sortedItems:function(){return 0}}},l=n,o=a("2877"),c=a("6544"),d=a.n(c),m=a("8336"),u=a("b0af"),p=a("99d9"),v=a("62ad"),h=a("a523"),g=a("169a"),f=a("ce7e"),y=a("4bd4"),b=a("132d"),k=a("da13"),C=a("5d23"),I=a("0fd9"),x=a("b974"),_=a("1f4f"),O=a("2db4"),w=a("2fa4"),P=a("8654"),A=Object(o["a"])(l,s,i,!1,null,null,null);e["default"]=A.exports;d()(A,{VBtn:m["a"],VCard:u["a"],VCardActions:p["a"],VCardText:p["b"],VCardTitle:p["c"],VCol:v["a"],VContainer:h["a"],VDialog:g["a"],VDivider:f["a"],VForm:y["a"],VIcon:b["a"],VListItem:k["a"],VListItemContent:C["a"],VRow:I["a"],VSelect:x["a"],VSimpleTable:_["a"],VSnackbar:O["a"],VSpacer:w["a"],VTextField:P["a"]})},ef13:function(t,e,a){var s={"./BaseFooter.vue":"3324","./BaseHeader.vue":"4845","./BaseManageItems.vue":"eb15"};function i(t){var e=r(t);return a(e)}function r(t){if(!a.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}i.keys=function(){return Object.keys(s)},i.resolve=r,t.exports=i,i.id="ef13"}});
//# sourceMappingURL=app.c82169a1.js.map